<!doctype html>
<html lang="zh">
  <head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>表单类型 - Fairys Valtio Form</title>
<script>{;const saved = localStorage.getItem('rspress-theme-appearance');const preferDark = window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = !saved || saved === 'auto' ? preferDark : saved === 'dark';document.documentElement.classList.toggle('dark', isDark);document.documentElement.classList.toggle('rp-dark', isDark);document.documentElement.style.colorScheme = isDark ? 'dark' : 'light';}</script>
<link href="/valtio-form-basic/static/css/styles.3cf23c46.css" rel="stylesheet">
<script defer src="/valtio-form-basic/static/js/styles.42a4228b.js"></script>
<script defer src="/valtio-form-basic/static/js/lib-react.db030cff.js"></script>
<script defer src="/valtio-form-basic/static/js/lib-router.e2a124a0.js"></script>
<script defer src="/valtio-form-basic/static/js/766.ed85f5df.js"></script>
<script defer src="/valtio-form-basic/static/js/index.340c6a1e.js"></script>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Rspress v2.0.2">
<link rel="icon" href="/valtio-form-basic/logo.png">
<meta property="og:type" content="website">
<meta property="og:title" content="表单类型 - Fairys Valtio Form"></head>

  <body>
    <div id="__rspress_root"><link rel="preload" as="image" href="/valtio-form-basic/logo.png"/><header class="rp-nav"><div class="rp-nav__left"><div class="rp-nav__title"><a href="/valtio-form-basic/" class="rp-nav__title__link rp-link"><div class="rp-nav__title__logo"><img src="/valtio-form-basic/logo.png" alt="logo" id="logo" class="rspress-logo rp-nav__title__logo-image rp-nav__title__logo-image--light"/><img src="/valtio-form-basic/logo.png" alt="logo" id="logo" class="rspress-logo rp-nav__title__logo-image rp-nav__title__logo-image--dark"/></div></a></div></div><div class="rp-nav__right"><button class="rp-search-button"><div class="rp-search-button__content"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 20 21" class="rp-search-button__icon"><path fill="currentColor" d="M8.333 1.913A6.667 6.667 0 0 1 15 8.58c0 1.54-.525 2.957-1.402 4.085l4.49 4.492a.834.834 0 0 1-1.177 1.178l-4.491-4.49a6.64 6.64 0 0 1-4.087 1.402 6.667 6.667 0 0 1 0-13.334m0 1.667a5 5 0 1 0 0 10 5 5 0 0 0 0-10"></path></svg><span class="rp-search-button__word">搜索</span></div><div class="rp-search-button__hotkey" style="opacity:0"><span></span><span>K</span></div></button><div class="rp-search-button--mobile"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 20 21"><path fill="currentColor" d="M8.333 1.913A6.667 6.667 0 0 1 15 8.58c0 1.54-.525 2.957-1.402 4.085l4.49 4.492a.834.834 0 0 1-1.177 1.178l-4.491-4.49a6.64 6.64 0 0 1-4.087 1.402 6.667 6.667 0 0 1 0-13.334m0 1.667a5 5 0 1 0 0 10 5 5 0 0 0 0-10"></path></svg></div><ul class="rp-nav-menu rp-nav-menu--right"><li class="rp-nav-menu__item rp-nav-menu__item--active"><a href="/valtio-form-basic/basic-form/" class="rp-nav-menu__item__container rp-link">基础表单</a></li><li class="rp-nav-menu__item"><a href="/valtio-form-basic/taro-form/" class="rp-nav-menu__item__container rp-link">taro表单</a></li><li class="rp-nav-menu__item"><a href="/valtio-form-basic/pc-form/" class="rp-nav-menu__item__container rp-link">PC表单</a></li><li class="rp-nav-menu__item"><a href="/valtio-form-basic/rn-form/" class="rp-nav-menu__item__container rp-link">RN表单</a></li></ul><div class="rp-nav__others"><div class="rp-nav-menu__divider"></div><div class="rp-switch-appearance"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" class="rp-switch-appearance__icon rp-switch-appearance__icon--sun"><path fill="currentColor" d="m7.001 15.848-1.226 1.226a.58.58 0 0 0 0 .818.58.58 0 0 0 .818 0l1.226-1.226a.58.58 0 0 0 0-.818.58.58 0 0 0-.818 0m-.352-8.735a.584.584 0 0 0 .825-.825L6.237 5.051a.584.584 0 0 0-.825.825zM5.011 11.07h-1.75a.584.584 0 0 0 0 1.167h1.75c.324 0 .584-.26.584-.583a.585.585 0 0 0-.584-.584m7.003-5.835c.324 0 .584-.26.584-.584V2.9a.58.58 0 0 0-.584-.584.58.58 0 0 0-.583.583V4.65c0 .323.262.584.583.584m5.616 1.621 1.226-1.225a.58.58 0 0 0 0-.818.58.58 0 0 0-.818 0l-1.226 1.225a.58.58 0 0 0 0 .818.576.576 0 0 0 .818 0m3.138 4.214h-1.75a.58.58 0 0 0-.584.584c0 .324.26.584.583.584h1.751a.584.584 0 1 0 0-1.167m-3.389 5.124a.584.584 0 0 0-.825.825l1.238 1.238a.584.584 0 0 0 .825-.826zm-5.365-9.795a5.256 5.256 0 0 0-5.257 5.258 5.256 5.256 0 0 0 5.257 5.257 5.256 5.256 0 0 0 5.257-5.257 5.256 5.256 0 0 0-5.257-5.258m0 11.675a.58.58 0 0 0-.583.583v1.751a.582.582 0 1 0 1.167 0v-1.75a.584.584 0 0 0-.584-.584"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="currentColor" viewBox="0 0 19 19" class="rp-switch-appearance__icon rp-switch-appearance__icon--moon"><path fill="currentColor" d="M9.166 0a9.2 9.2 0 0 1 1.857.188.834.834 0 0 1 .042 1.623 4.47 4.47 0 1 0 5.457 5.457l.048-.135a.834.834 0 0 1 1.575.177q.186.902.188 1.856A9.168 9.168 0 1 1 9.166 0"></path></svg></div><div class="rp-social-links"><a href="https://github.com/autumn-fairy-tales/valtio-form-basic" target="_blank" rel="noopener noreferrer" class="rp-social-links__item"><div class="rp-social-links__icon"><div class="rp-social-links__icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></div></div></a><ul class="rp-hover-group rp-hover-group--hidden rp-hover-group--right"></ul></div></div><button aria-label="mobile hamburger" class="rp-nav-hamburger rp-nav-hamburger__sm"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" fill="none" viewBox="0 0 21 21"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.667" d="M3.645 5.225h13.333M3.645 10.225h13.333M3.645 15.225h13.333"></path></svg></button><button aria-label="mobile hamburger" class="rp-nav-hamburger rp-nav-hamburger__md"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" fill="none" viewBox="0 0 21 21"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.667" d="M3.645 5.225h13.333M3.645 10.225h13.333M3.645 15.225h13.333"></path></svg><ul class="rp-hover-group rp-hover-group--hidden rp-hover-group--right"><div class="rp-nav-menu__others-mobile__container"><div class="rp-nav-hamburger__md__hover-group"><div class="rp-nav-screen-appearance"><div class="rp-nav-screen-appearance__left">主题</div><div class="rp-nav-screen-appearance__right"></div></div><div class="rp-nav-screen-divider"></div><div class="rp-social-links"><a href="https://github.com/autumn-fairy-tales/valtio-form-basic" target="_blank" rel="noopener noreferrer" class="rp-social-links__item"><div class="rp-social-links__icon"><div class="rp-social-links__icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></div></div></a><ul class="rp-hover-group rp-hover-group--hidden rp-hover-group--right"></ul></div></div></div></ul></button></div></header><div class="rp-doc-layout__menu"><div class="rp-sidebar-menu"><button type="button" class="rp-sidebar-menu__left"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg><span>菜单</span></button><button type="button" class="rp-sidebar-menu__right"><span>目录</span><svg width="14" height="14" class="rp-progress-circle"><circle cx="7" cy="7" r="6" stroke-linecap="round" fill="none" stroke="var(--rp-c-divider-light)" stroke-width="2"></circle><circle cx="7" cy="7" r="6" stroke-linecap="round" fill="none" stroke="var(--rp-c-brand)" stroke-width="2" stroke-dasharray="37.69911184307752" stroke-dashoffset="37.69911184307752" transform="rotate(-90 7 7)" style="transition:stroke-dashoffset 0.3s"></circle></svg><svg width="1em" height="1em" viewBox="0 0 32 32" style="transform:rotate(0deg);transition:transform 0.2s ease-out"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></button></div></div><div class="rp-doc-layout__container"><aside class="rp-doc-layout__sidebar rp-scrollbar"><a href="/valtio-form-basic/basic-form/" class="rp-sidebar-item rp-link" style="padding-left:12px" data-depth="0"><div class="rp-sidebar-item__left"><span>基础表单组件概览</span></div><div class="rp-sidebar-item__right"></div></a><a href="/valtio-form-basic/basic-form/interface" class="rp-sidebar-item rp-sidebar-item--active rp-link" style="padding-left:12px" data-depth="0"><div class="rp-sidebar-item__left"><span>表单类型</span></div><div class="rp-sidebar-item__right"></div></a><a href="/valtio-form-basic/basic-form/use" class="rp-sidebar-item rp-link" style="padding-left:12px" data-depth="0"><div class="rp-sidebar-item__left"><span>使用基础表单组件</span></div><div class="rp-sidebar-item__right"></div></a></aside><div class="rp-doc-layout__doc"><main class="rp-doc-layout__doc-container"><div class="rp-doc rspress-doc"><h1 class="rp-toc-include" id="表单类型"><span>表单类型</span><a href="#表单类型" class="rp-header-anchor rp-link" aria-hidden="true">#</a> </h1><!--$--><h2 class="rp-toc-include" id="类型方法"><a href="#类型方法" class="rp-header-anchor rp-link" aria-hidden="true">#</a>类型方法</h2>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__title">src/common/interface.ts</div><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts" data-title="src/common/interface.ts"><code><span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> type</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    [</span><span style="color:var(--shiki-token-function)">K</span><span style="color:var(--shiki-token-keyword)"> in</span><span style="color:var(--shiki-token-keyword)"> keyof</span><span style="color:var(--shiki-token-function)"> T</span><span style="color:var(--shiki-foreground)">]</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> T</span><span style="color:var(--shiki-foreground)">[</span><span style="color:var(--shiki-token-function)">K</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">};</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> type</span><span style="color:var(--shiki-token-function)"> MakeFieldRequired</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> K</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-keyword)"> keyof</span><span style="color:var(--shiki-token-function)"> T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Omit</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> K</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">&amp;</span><span style="color:var(--shiki-token-function)"> Required</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">Pick</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> K</span><span style="color:var(--shiki-foreground)">&gt;&gt;;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h2 class="rp-toc-include" id="实例"><a href="#实例" class="rp-header-anchor rp-link" aria-hidden="true">#</a>实例</h2>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__title">src/common/instance/index.ts</div><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts" data-title="src/common/instance/index.ts"><code><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { MObject } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;../interface&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { RuleItem</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> ValidateFieldsError</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> Values } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;async-validator&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { FairysValtioFormAttrsProps } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;../../form/form&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">/**表单实例*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> class</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 表单值改变时回调</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> path 表单项路径</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> value 表单项值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    onValuesChange</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-foreground)"> (path</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> value</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /***</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 判断值是否为代理对象</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> value 值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@returns</span><span style="color:var(--shiki-token-comment)"> 是否为代理对象</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    isValtioProxy</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (value</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**状态*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    state</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> T</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 错误信息</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    errorState</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">[]&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**隐藏状态*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    hideState</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**初始化表单值*/</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    ctor</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (options</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        formData</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> Partial</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        hideState</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        initFormDataType</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormAttrsProps</span><span style="color:var(--shiki-foreground)">[</span><span style="color:var(--shiki-token-string-expression)">&quot;initFormDataType&quot;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    }) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 更新数据</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> state 更新数据对象</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> isValidate 是否验证(可选)</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    updated</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> &lt;</span><span style="color:var(--shiki-token-function)">M</span><span style="color:var(--shiki-token-keyword)"> =</span><span style="color:var(--shiki-token-function)"> T</span><span style="color:var(--shiki-foreground)">&gt;(state</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Partial</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">M</span><span style="color:var(--shiki-foreground)">&gt;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> isValidate</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**根据路径设置值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> path 值路径</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> value 值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    updatedValueByPaths</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (path</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> value</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项卸载移除保存值*/</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    removeValueByPaths</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (path</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 清理值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    clearValue</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (fields</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-foreground)">[]) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> this</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 更新行数据的隐藏信息</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> objectHideInfo 行数据隐藏信息对象</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    updatedHideInfo</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (objectHideInfo</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">&gt;) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> this</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 清理隐藏信息</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    clearHideInfo</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (fields</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-foreground)">[]) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> this</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 更新行数据的错误信息</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> objectErrorInfo 行数据错误信息对象</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    updatedErrorInfo</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (objectErrorInfo</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">[]&gt;) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> this</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 清理错误信息</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    clearErrorInfo</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (fields</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-foreground)">[]) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> this</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 清理所有数据</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    clear</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> () </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**由表单项挂载规则,(根据表单项的字段存储路径对应校验规则)*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    mountRules</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> RuleItem</span><span style="color:var(--shiki-foreground)">[]&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**移除表单项挂载规则*/</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    removeRules</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (name</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项规则*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    rules</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> RuleItem</span><span style="color:var(--shiki-foreground)">[]&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项名称到路径映射*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    nameToPaths</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-foreground)">[]&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**验证表单项规则</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> fields 要验证的字段(可选)</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> isReturn 是否返回验证结果(可选)</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    validate</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (fields</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-foreground)">[]</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> isReturn</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-function)"> Promise</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">ValidateFieldsError</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-function)"> Values</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-function)"> Partial</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 验证某些前缀的字段</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> prefix 前缀字段数组</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> isReturn 是否返回验证结果(可选)</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    validatePrefixFields</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (prefix</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">[]</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> isReturn</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-function)"> Promise</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">ValidateFieldsError</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-function)"> Values</span><span style="color:var(--shiki-foreground)">&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>声明实例</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**声明实例*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt;(instance</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>表单实例上下文</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**表单实例上下文*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> const</span><span style="color:var(--shiki-token-constant)"> FairysValtioFormInstanceContext</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-keyword)"> import</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-string-expression)">&quot;react&quot;</span><span style="color:var(--shiki-foreground)">).</span><span style="color:var(--shiki-token-function)">Context</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">any</span><span style="color:var(--shiki-foreground)">&gt;&gt;;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>获取表单实例上下文</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**获取表单实例上下文*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormInstanceContext</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt;()</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>状态取值</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**状态取值*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormInstanceContextState</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt;()</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> [</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">[]&gt;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">];</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>隐藏组件状态取值</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**隐藏组件状态取值*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormInstanceContextHideState</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt;()</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> [</span><span style="color:var(--shiki-token-function)">Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">&gt;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">];</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>传递表单实例获取状态</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 传递表单实例获取状态</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> */</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormInstanceToState</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt;(formInstance</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> T</span><span style="color:var(--shiki-foreground)">;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>传递表单实例获取隐藏状态</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 传递表单实例获取隐藏状态</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> */</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormInstanceToHideState</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt;(formInstance</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">&gt;;</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h2 class="rp-toc-include" id="获取父级表单项name属性值"><a href="#获取父级表单项name属性值" class="rp-header-anchor rp-link" aria-hidden="true">#</a>获取父级表单项<code>name</code>属性值</h2>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__title">src/common/hooks/index.ts</div><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts" data-title="src/common/hooks/index.ts"><code><span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> interface</span><span style="color:var(--shiki-token-function)"> FairysValtioFormParentAttrsState</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    name</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">/***</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 父级属性</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> */</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> class</span><span style="color:var(--shiki-token-function)"> FairysValtioFormParentAttrs</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    state</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormParentAttrsState</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    updated</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (attrs</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /***更新父级字段值*/</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    updatedName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (name</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> parentName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> interface</span><span style="color:var(--shiki-token-function)"> FairysValtioFormAttrsNameOptions</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    name</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否拼接父级字段名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isJoinParentField</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>初始化父级属性</strong></em>**</p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**初始化父级属性*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> const</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormParentAttrs</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (instance</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormParentAttrs</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-function)"> FairysValtioFormParentAttrs</span><span style="color:var(--shiki-foreground)">;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>父级属性上下文</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/***父级属性上下文*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> const</span><span style="color:var(--shiki-token-constant)"> FairysValtioFormParentAttrsContext</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-keyword)"> import</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-string-expression)">&quot;react&quot;</span><span style="color:var(--shiki-foreground)">).</span><span style="color:var(--shiki-token-function)">Context</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">FairysValtioFormParentAttrs</span><span style="color:var(--shiki-foreground)">&gt;;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>获取父级属性实例</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**获取父级属性实例*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> const</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormParentAttrsContext</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> () </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-function)"> FairysValtioFormParentAttrs</span><span style="color:var(--shiki-foreground)">;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>获取父级属性状态</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**获取父级属性状态*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> const</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormParentAttrsState</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> () </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-keyword)"> readonly</span><span style="color:var(--shiki-foreground)"> [{</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">    readonly</span><span style="color:var(--shiki-foreground)"> name</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> FairysValtioFormParentAttrs</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>获取属性名和路径</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**获取属性名和路径*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> const</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormAttrsName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (options</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormAttrsNameOptions</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formAttrsNameInstance</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormParentAttrs</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    parentName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    name</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    paths</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (</span><span style="color:var(--shiki-token-constant)">number</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-constant)"> symbol</span><span style="color:var(--shiki-foreground)">)[] </span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-foreground)"> (</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">)[];</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">};</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h2 class="rp-toc-include" id="useid"><a href="#useid" class="rp-header-anchor rp-link" aria-hidden="true">#</a>useId</h2>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__title">src/common/hooks/index.ts</div><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts" data-title="src/common/hooks/index.ts"><code><span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> const</span><span style="color:var(--shiki-token-function)"> useId</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (suffix</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h2 class="rp-toc-include" id="form"><a href="#form" class="rp-header-anchor rp-link" aria-hidden="true">#</a>form</h2>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__title">src/form/form.tsx</div><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts" data-title="src/form/form.tsx"><code><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { MObject } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;../common/interface&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { FairysValtioFormInstance } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;../common/instance&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { </span><span style="color:var(--shiki-token-keyword)">type</span><span style="color:var(--shiki-foreground)"> ReactNode } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;react&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { FairysValtioFormLayoutAttrsProps } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;./layout&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { RuleItem } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;async-validator&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> interface</span><span style="color:var(--shiki-token-function)"> FairysValtioFormAttrsProps</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt; </span><span style="color:var(--shiki-token-keyword)">extends</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutAttrsProps</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单实例*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    form</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**子元素*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    children</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> ReactNode</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项规则(如果表单项没有指定规则，则使用全局规则，如果表单项指定规则，则使用表单项规则)*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    rules</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> RuleItem</span><span style="color:var(--shiki-foreground)">[]&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单初始值*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formData</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;[</span><span style="color:var(--shiki-token-string-expression)">&#x27;state&#x27;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单隐藏状态*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    hideState</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;[</span><span style="color:var(--shiki-token-string-expression)">&#x27;hideState&#x27;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 初始化表单数据类型，默认值为 deepCopy</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * - deepCopy：使用深度拷贝初始化表单数据</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * - immutable：直接使用对象(注意：当传递的不是`valtio`的`proxy`对象时，会使用`valtio`中的`proxy`声明)</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    initFormDataType</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;deepCopy&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;immutable&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">   /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 表单值改变时回调</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> path 表单项路径</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> value 表单项值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    onValuesChange</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-foreground)"> (path</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> value</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 表单属性处理</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@example</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * ```tsx</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">import { useFairysValtioForm } from &quot;@fairys/valtio-form&quot;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">import type { FairysValtioFormAttrProps } from &quot;@fairys/valtio-form&quot;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">export interface FormProps extends FairysValtioFormAttrProps{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">export const Form = (props: FormProps) =&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  const { formInstance,children, ...rest } = useFairysValtioForm(props)</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  return  (</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    &lt;FairysValtioFormInstanceContext.Provider value={formInstance}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">      &lt;布局组件 {...rest}&gt;{children}&lt;/布局组件&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    &lt;/FairysValtioFormInstanceContext.Provider&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  );</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * ```</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> useFairysValtioForm</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt;(props</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormAttrsProps</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> ref</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">Ref</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;&gt;)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Omit</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">FairysValtioFormAttrsProps</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-string-expression)"> &quot;initFormDataType&quot;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &quot;form&quot;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &quot;rules&quot;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &quot;formData&quot;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &quot;hideState&quot;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &quot;onValuesChange&quot;</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">&amp;</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formInstance</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">};</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h2 class="rp-toc-include" id="formitem"><a href="#formitem" class="rp-header-anchor rp-link" aria-hidden="true">#</a>formItem</h2>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__title">src/form/form.item.tsx</div><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts" data-title="src/form/form.item.tsx"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**表单项*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { MObject } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;../common/interface&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> React </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;react&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { FairysValtioFormInstance } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;../common/instance&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { FairysValtioFormLayoutContextOptions } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;./layout&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { FairysValtioFormParentAttrs } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;../common/hooks&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { RuleItem } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;async-validator&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> interface</span><span style="color:var(--shiki-token-function)"> FairysValtioFormItemAttrsProps</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**平台*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    platform</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;pc&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;rn&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;taro&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 表单项名称 ，字段需要和存储的字段路径一致</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@example</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 路径中的值为 number 类型时，会创建一个空数组。路径中的值为 string 类型时，会创建一个空对象。最后一个直接赋值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 默认：&quot;name&quot;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 嵌套字段：&quot;name.a.doc&quot; ===&gt; { name: { a: { doc: undefined } } }</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 嵌套字段：&quot;name[1].a.doc&quot; ===&gt; { name: [{}, { a: { doc: undefined } }] }</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 嵌套字段：&quot;name.a[2].doc&quot; ===&gt; { name: { a: [{}, {}, { doc: undefined }] } }</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    name</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项标签*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    label</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**传递组件字段*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    valuePropName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**取值字段(默认 valuePropName字段值)*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    getValuePath</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**自定义获取值*/</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    getValueFromEvent</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-foreground)"> (event</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> form</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**值格式化*/</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    formatValue</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-foreground)"> (value</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> form</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> event</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**触发数据更新之后触发（用于数据联动之类的）*/</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    onAfterUpdate</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-foreground)"> (value</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> form</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> event</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**事件名称*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    trigger</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    className</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    style</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    labelClassName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    labelStyle</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    bodyClassName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    bodyStyle</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    children</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">ReactNode</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**规则校验失败错误提示位置*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    errorLayout</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutContextOptions</span><span style="color:var(--shiki-foreground)">[</span><span style="color:var(--shiki-token-string-expression)">&#x27;errorLayout&#x27;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**label显示模式*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    labelMode</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutContextOptions</span><span style="color:var(--shiki-foreground)">[</span><span style="color:var(--shiki-token-string-expression)">&#x27;labelMode&#x27;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**额外内容*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    extra</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">ReactNode</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**底部提示内容*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    helpText</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">ReactNode</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 表单项占据列数</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@default</span><span style="color:var(--shiki-token-comment)"> 1</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    colSpan</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 表单项占据行数</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@default</span><span style="color:var(--shiki-token-comment)"> 1</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    rowSpan</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否必填*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isRequired</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否显示冒号*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    showColon</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**底部显示边框*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemBorderType</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutContextOptions</span><span style="color:var(--shiki-foreground)">[</span><span style="color:var(--shiki-token-string-expression)">&#x27;itemBorderType&#x27;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**边框颜色*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemBorderColor</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">[</span><span style="color:var(--shiki-token-string-expression)">&#x27;borderColor&#x27;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否校验失败时显示红色边框*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isInvalidBorderRed</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否校验失败时显示红色文本*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isInvalidTextRed</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**输入框属性*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    attrs</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否拼接父级字段名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isJoinParentField</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**校验规则*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    rules</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> RuleItem</span><span style="color:var(--shiki-foreground)">[];</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>表单项属性参数处理</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 处理表单表单项属性</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@example</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * ```tsx</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">import { Fragment } from &#x27;react&#x27;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">import { useFairysValtioFormItemAttrs , FairysValtioFormParentAttrsContext } from &quot;@fairys/valtio-form&quot;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">import type { FairysValtioFormItemAttrsProps } from &quot;@fairys/valtio-form&quot;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">export interface FormItemProps extends FairysValtioFormItemAttrsProps{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">export const FormItem = (props: FormItemProps) =&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  const { label, extra, helpText } = props</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  const {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    itemClassName, itemStyle, containerClassName, itemLabelClassName, itemLabelStyle,</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    itemBodyClassName, itemBodyStyle, itemInputClassName, itemExtraClassName, errorClassName, helpClassName,</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    isInvalid, itemBorderType, children, error,formAttrsNameInstance</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  } = useFairysValtioFormItemAttrs(props)</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  return (</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">   &lt;FairysValtioFormParentAttrsContext.Provider value={formAttrsNameInstance}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    &lt;View className={itemClassName} style={itemStyle}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">      &lt;View className={containerClassName}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">        &lt;View className={itemLabelClassName} style={itemLabelStyle}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">          {label}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">        &lt;/View&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">        &lt;View className={itemBodyClassName} style={itemBodyStyle}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">          &lt;View className={itemInputClassName}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">            {children}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">          &lt;/View&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">          {extra ? &lt;View className={itemExtraClassName}&gt;{extra}&lt;/View&gt; : &lt;Fragment /&gt;}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">          {itemBorderType === &#x27;body&#x27; &amp;&amp; isInvalid ? &lt;View className={errorClassName}&gt;{error}&lt;/View&gt; : &lt;Fragment /&gt;}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">        &lt;/View&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">      &lt;/View&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">      {helpText ? &lt;View className={helpClassName}&gt;{helpText}&lt;/View&gt; : &lt;Fragment /&gt;}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">      {isInvalid &amp;&amp; itemBorderType !== &#x27;body&#x27; ? &lt;View className={errorClassName}&gt;{error}&lt;/View&gt; : &lt;Fragment /&gt;}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    &lt;/View&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">   &lt;/FairysValtioFormParentAttrsContext.Provider&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  );</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * ```</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormItemAttrs</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt;(props</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormItemAttrsProps</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormItemAttrsReturn</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> interface</span><span style="color:var(--shiki-token-function)"> FairysValtioFormItemAttrsReturn</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项值*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    value</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否校验错误*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isInvalid</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**边框类型*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemBorderType</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutContextOptions</span><span style="color:var(--shiki-foreground)">[</span><span style="color:var(--shiki-token-string-expression)">&#x27;itemBorderType&#x27;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**值改变事件*/</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    onValueChange</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (event</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**当前表单项占据列数*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    colSpan</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**当前表单项占据行数*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    rowSpan</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**列数*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    colCount</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**标签显示模式*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    labelMode</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutContextOptions</span><span style="color:var(--shiki-foreground)">[</span><span style="color:var(--shiki-token-string-expression)">&#x27;labelMode&#x27;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**错误提示位置*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    errorLayout</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutContextOptions</span><span style="color:var(--shiki-foreground)">[</span><span style="color:var(--shiki-token-string-expression)">&#x27;errorLayout&#x27;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否必填*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isRequired</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单状态*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    state</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> T</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**错误状态*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    errorState</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">[]&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单实例*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formInstance</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**错误信息*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    error</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">[];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**拼接父级字段名后得到的表单项名称*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    _name</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项名称*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    name</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项ID*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    id</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项路径*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    paths</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-foreground)"> (</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">)[];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**父级字段名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    parentName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单属性名实例*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formAttrsNameInstance</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormParentAttrs</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项类名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemClassName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项样式*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemStyle</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**容器类名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    containerClassName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**标签类名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemLabelClassName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**标签样式*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemLabelStyle</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**体类名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemBodyClassName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**体样式*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemBodyStyle</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**输入框类名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemInputClassName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**额外内容类名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemExtraClassName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**错误提示类名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    errorClassName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**帮助提示类名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    helpClassName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**子元素*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    children</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">ReactNode</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>没有样式的表单项属性，仅返回基础输入组件参数</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 没有样式的表单项属性，仅返回基础输入组件参数</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@example</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> *```tsx</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">import { Fragment } from &#x27;react&#x27;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">import { useFairysValtioFormItemAttrs, FairysValtioFormParentAttrsContext } from &quot;@fairys/valtio-form&quot;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">import type { FairysValtioFormItemAttrsProps } from &quot;@fairys/valtio-form&quot;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">export interface FormItemProps extends FairysValtioFormItemAttrsProps{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">export const FormItem = (props: FormItemProps) =&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  const { children , formAttrsNameInstance } = useFairysValtioFormItemNoStyleAttrs(props)</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  return &lt;FairysValtioFormParentAttrsContext.Provider value={formAttrsNameInstance}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    {children}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  &lt;/FairysValtioFormParentAttrsContext.Provider&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * ```</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormItemNoStyleAttrs</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt;(props</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormItemAttrsProps</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormItemNoStyleAttrsReturn</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> interface</span><span style="color:var(--shiki-token-function)"> FairysValtioFormItemNoStyleAttrsReturn</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> MObject</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt; </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">&gt;&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项值*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    value</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否校验错误*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isInvalid</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否必填*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isRequired</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**错误信息*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    error</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">[];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**值改变事件*/</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    onValueChange</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (event</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单状态*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    state</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> T</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**错误状态*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    errorState</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> Record</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">PropertyKey</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">[]&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单实例*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formInstance</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormInstance</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**拼接父级字段名后得到的表单项名称*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    _name</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项名称*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    name</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项ID*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    id</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项路径*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    paths</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-foreground)"> (</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">)[];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**父级字段名*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    parentName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单属性名实例*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formAttrsNameInstance</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormParentAttrs</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**子元素*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    children</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">ReactNode</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h2 class="rp-toc-include" id="layout"><a href="#layout" class="rp-header-anchor rp-link" aria-hidden="true">#</a>layout</h2>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__title">src/form/layout.tsx</div><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts" data-title="src/form/layout.tsx"><code><span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> interface</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutContextOptions</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**平台*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    platform</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;pc&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;rn&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;taro&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**列数据*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    colCount</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**规则校验失败错误提示位置*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    errorLayout</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;bottom-left&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;bottom-right&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;top-right&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;top-left&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;left-border-top&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;right-border-top&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * label显示模式</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@platform</span><span style="color:var(--shiki-token-comment)"> taro 支持 between</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    labelMode</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;left&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;top&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;between&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项 className*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formItemClassName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项 style*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formItemStyle</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项 label  className*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formItemLabelClassName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项 label  style*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formItemLabelStyle</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项 body  className*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formItemBodyClassName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单项 body  style*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formItemBodyStyle</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 底部边框类型</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemBorderType</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;bottom&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;body&#x27;</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-string-expression)"> &#x27;none&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**边框颜色*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemBorderColor</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">[</span><span style="color:var(--shiki-token-string-expression)">&#x27;borderColor&#x27;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否校验失败时显示红色边框*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isInvalidBorderRed</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否校验失败时显示红色文本*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isInvalidTextRed</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否显示冒号*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    showColon</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> interface</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutAttrsProps</span><span style="color:var(--shiki-token-keyword)"> extends</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutContextOptions</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@description</span><span style="color:var(--shiki-token-comment)"> gap 属性是用来设置网格行与列之间的间隙，该属性是row-gap and column-gap的简写形式。</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    gap</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**标题*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    title</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">ReactNode</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**额外内容*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    extra</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">ReactNode</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**内容*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    children</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">ReactNode</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否占据整行*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    isAllColSpan</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    className</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    style</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**头部ClassName*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    headerClassName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**头部样式*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    headerStyle</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**内容ClassName*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    bodyClassName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**内容样式*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    bodyStyle</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**是否边框*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    bordered</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**显示阴影*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    boxShadow</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**最后一个是否显示底部边框*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    lastItemBordered</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> boolean</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> class</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutInstance</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    state</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutContextOptions</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    updated</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (options</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutContextOptions</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-constant)"> void</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span>
<span class="line"></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>初始化布局实例</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> const</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormLayoutInstance</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (instance</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutInstance</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutInstance</span><span style="color:var(--shiki-foreground)">;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>创建布局上下文</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> const</span><span style="color:var(--shiki-token-constant)"> FairysValtioFormLayoutContext</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-keyword)"> import</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-string-expression)">&quot;react&quot;</span><span style="color:var(--shiki-foreground)">).</span><span style="color:var(--shiki-token-function)">Context</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">FairysValtioFormLayoutInstance</span><span style="color:var(--shiki-foreground)">&gt;;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>获取布局上下文</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> const</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormLayoutContext</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> () </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-foreground)"> [</span><span style="color:var(--shiki-token-function)">FairysValtioFormLayoutContextOptions</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutInstance</span><span style="color:var(--shiki-foreground)">];</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<p><em><strong>布局参数处理</strong></em></p>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 布局属性处理</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@example</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * ```tsx</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">import { Fragment } from &#x27;react&#x27;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">import { useFairysValtioFormLayoutAttrs, FairysValtioFormLayoutContext } from &quot;@fairys/valtio-form&quot;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">import type { FairysValtioFormLayoutAttrsProps } from &quot;@fairys/valtio-form&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">export interface LayoutProps extends FairysValtioFormLayoutAttrsProps {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">export const Layout = (props: LayoutProps) =&gt; {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  const { children, title, extra } = props</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  const {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    formLayoutInstance,</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    layoutName, layoutStyle,</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    headerName, headerStyle,</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    headerTitleName, headerExtraName,</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    bodyName, bodyStyle</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">  } = useFairysValtioFormLayoutAttrs(props)</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-comment)">   return (</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     &lt;FairysValtioFormLayoutContext.Provider value={formLayoutInstance}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">       &lt;div className={layoutName} style={layoutStyle}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">         &lt;div&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">           {title || extra ? (</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">             &lt;div style={headerStyle} className={headerName}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">               &lt;div className={headerTitleName}&gt;{title}&lt;/div&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">               &lt;div className={headerExtraName}&gt;{extra}&lt;/div&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">             &lt;/div&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">           ) : (</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">             &lt;Fragment /&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">           )}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">         &lt;/div&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">         &lt;div className={bodyName} style={bodyStyle}&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">           {children}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">         &lt;/div&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">       &lt;/div&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     &lt;/FairysValtioFormLayoutContext.Provider&gt;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">   );</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">}</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">* ```</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> useFairysValtioFormLayoutAttrs</span><span style="color:var(--shiki-foreground)">(props</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutAttrsProps</span><span style="color:var(--shiki-foreground)">)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutAttrsReturn</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> interface</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutAttrsReturn</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**列数*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    colCount</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**规则校验失败错误提示位置*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    errorLayout</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * label显示模式</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * </span><span style="color:var(--shiki-token-keyword)">@platform</span><span style="color:var(--shiki-token-comment)"> taro 支持 between</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    labelMode</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     * 底部边框类型</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">     */</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    itemBorderType</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**表单布局实例*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    formLayoutInstance</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> FairysValtioFormLayoutInstance</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**布局ClassName*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    layoutName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**布局样式*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    layoutStyle</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**头部ClassName*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    headerName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**头部样式*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    headerStyle</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**头部标题ClassName*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    headerTitleName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**头部额外内容ClassName*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    headerExtraName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**内容ClassName*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    bodyName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">    /**内容样式*/</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    bodyStyle</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> React</span><span style="color:var(--shiki-foreground)">.</span><span style="color:var(--shiki-token-function)">CSSProperties</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">}</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h2 class="rp-toc-include" id="utils"><a href="#utils" class="rp-header-anchor rp-link" aria-hidden="true">#</a>utils</h2>
<div class="rp-codeblock language-ts"><div class="rp-codeblock__title">src/common/utils/index.ts</div><div class="rp-codeblock__content"><div class="rp-codeblock__content__scroll-container rp-scrollbar rp-scrollbar--always"><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0" data-lang="ts" data-title="src/common/utils/index.ts"><code><span class="line"><span style="color:var(--shiki-token-comment)">/***</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 设置值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> object 任意对象</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> paths 值路径</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> nextValue 新值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> *</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@description</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 值不存在时，当 paths 路径中的值为 number 类型时，会创建一个空数组。当 paths 路径中的值为 string 类型时，会创建一个空对象。</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> */</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> set</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">T</span><span style="color:var(--shiki-foreground)">&gt;(state</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> paths</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-foreground)">[]</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> nextValue</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> T</span><span style="color:var(--shiki-foreground)">)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">/***</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 获取值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> value 任意值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> segments 键路径</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> */</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> get</span><span style="color:var(--shiki-foreground)">&lt;</span><span style="color:var(--shiki-token-function)">TDefault</span><span style="color:var(--shiki-token-keyword)"> =</span><span style="color:var(--shiki-token-constant)"> unknown</span><span style="color:var(--shiki-foreground)">&gt;(value</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> any</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> segments</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-foreground)">[])</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> TDefault</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">/***</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 格式化路径，将路径中的数组索引转换为数字</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> path 路径</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@returns</span><span style="color:var(--shiki-token-comment)"> 格式化后的路径</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> */</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> formatePath</span><span style="color:var(--shiki-foreground)">(path</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-function)"> PropertyKey</span><span style="color:var(--shiki-foreground)">)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (</span><span style="color:var(--shiki-token-constant)">number</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-constant)"> symbol</span><span style="color:var(--shiki-foreground)">)[] </span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-foreground)"> (</span><span style="color:var(--shiki-token-constant)">string</span><span style="color:var(--shiki-token-keyword)"> |</span><span style="color:var(--shiki-token-constant)"> number</span><span style="color:var(--shiki-foreground)">)[];</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">/**格式化属性名*/</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> function</span><span style="color:var(--shiki-token-function)"> formateName</span><span style="color:var(--shiki-foreground)">(name</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-foreground)"> parentName</span><span style="color:var(--shiki-token-keyword)">?:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">)</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> string</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">/***</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * 是否为对象</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> x 任意值</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@returns</span><span style="color:var(--shiki-token-comment)"> 是否为对象</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)"> */</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> declare</span><span style="color:var(--shiki-token-keyword)"> const</span><span style="color:var(--shiki-token-function)"> isObject</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> (x</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)"> unknown</span><span style="color:var(--shiki-foreground)">) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-foreground)"> x </span><span style="color:var(--shiki-token-keyword)">is</span><span style="color:var(--shiki-token-constant)"> object</span><span style="color:var(--shiki-foreground)">;</span></span></code></pre></div><div class="rp-code-button-group"><button class="rp-code-button-group__button rp-code-wrap-button" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrapped"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="rp-code-button-group__icon rp-code-button-group__icon--wrap"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="rp-code-button-group__button rp-code-copy-button" title="复制代码"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--copy"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="rp-code-button-group__icon rp-code-copy-button__icon rp-code-copy-button__icon--success"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><!--/$--></div><footer class="rp-doc-footer"><div class="rp-doc-footer__edit"></div><div class="rp-doc-footer__divider"></div><div class="rp-prev-next-page"><a href="/valtio-form-basic/basic-form/" class="rp-prev-next-page__item rp-prev-next-page__prev rp-link"><span class="rp-prev-next-page__item__desc">上一页</span><span class="rp-prev-next-page__item__title"><svg width="1em" height="1em" viewBox="0 0 32 32" class="rp-prev-next-page__icon rp-prev-next-page__rotate_180"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg><span>基础表单组件概览</span></span></a><a href="/valtio-form-basic/basic-form/use" class="rp-prev-next-page__item rp-prev-next-page__next rp-link"><span class="rp-prev-next-page__item__desc">下一页</span><span class="rp-prev-next-page__item__title"><span>使用基础表单组件</span><svg width="1em" height="1em" viewBox="0 0 32 32" class="rp-prev-next-page__icon"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></span></a></div></footer></main></div><aside class="rp-doc-layout__outline rp-scrollbar"><div class="rp-outline"><div class="rp-outline__title">目录<svg width="14" height="14" class="rp-progress-circle"><circle cx="7" cy="7" r="6" stroke-linecap="round" fill="none" stroke="var(--rp-c-divider-light)" stroke-width="2"></circle><circle cx="7" cy="7" r="6" stroke-linecap="round" fill="none" stroke="var(--rp-c-brand)" stroke-width="2" stroke-dasharray="37.69911184307752" stroke-dashoffset="37.69911184307752" transform="rotate(-90 7 7)" style="transition:stroke-dashoffset 0.3s"></circle></svg></div><nav class="rp-outline__toc rp-scrollbar"><a href="#类型方法" class="rp-toc-item rp-link" title="类型方法" style="padding-left:0" data-depth="0"><span class="rp-toc-item__text rp-doc">类型方法</span></a><a href="#实例" class="rp-toc-item rp-link" title="实例" style="padding-left:0" data-depth="0"><span class="rp-toc-item__text rp-doc">实例</span></a><a href="#获取父级表单项name属性值" class="rp-toc-item rp-link" title="获取父级表单项name属性值" style="padding-left:0" data-depth="0"><span class="rp-toc-item__text rp-doc">获取父级表单项<code>name</code>属性值</span></a><a href="#useid" class="rp-toc-item rp-link" title="useId" style="padding-left:0" data-depth="0"><span class="rp-toc-item__text rp-doc">useId</span></a><a href="#form" class="rp-toc-item rp-link" title="form" style="padding-left:0" data-depth="0"><span class="rp-toc-item__text rp-doc">form</span></a><a href="#formitem" class="rp-toc-item rp-link" title="formItem" style="padding-left:0" data-depth="0"><span class="rp-toc-item__text rp-doc">formItem</span></a><a href="#layout" class="rp-toc-item rp-link" title="layout" style="padding-left:0" data-depth="0"><span class="rp-toc-item__text rp-doc">layout</span></a><a href="#utils" class="rp-toc-item rp-link" title="utils" style="padding-left:0" data-depth="0"><span class="rp-toc-item__text rp-doc">utils</span></a></nav><div class="rp-outline__divider"></div><div class="rp-outline__bottom"><button class="rp-outline__scroll-to-top"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.99967 14.6667C11.6816 14.6667 14.6663 11.6819 14.6663 8.00001C14.6663 4.31811 11.6816 1.33334 7.99967 1.33334C4.31777 1.33334 1.33301 4.31811 1.33301 8.00001C1.33301 11.6819 4.31777 14.6667 7.99967 14.6667Z" stroke="currentColor" stroke-opacity="0.8" stroke-width="1.33333"></path><path d="M7.99967 14.6667C11.6816 14.6667 14.6663 11.6819 14.6663 8.00001C14.6663 4.31811 11.6816 1.33334 7.99967 1.33334C4.31777 1.33334 1.33301 4.31811 1.33301 8.00001C1.33301 11.6819 4.31777 14.6667 7.99967 14.6667Z" stroke="currentColor" stroke-opacity="0.8" stroke-width="1.33333" stroke-linejoin="round"></path><path d="M11 9L8 6L5 9" stroke="currentColor" stroke-opacity="0.8" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>回到顶部</span></button></div></div></aside></div></div>
    <div id="__rspress_modal_container"></div>
  </body>
</html>
