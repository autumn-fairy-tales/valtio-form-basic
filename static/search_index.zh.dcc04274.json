[{"title":"基础表单组件概览","content":"组合基础表单组件，使其直接配置即可使用\n\n## 安装\n\n```bash\nnpm install @fairys/valtio-form-basic # yarn add @fairys/valtio-form-basic # pnpm add @fairys/valtio-form-basic\n```\n","routePath":"/basic-form/","lang":"zh","toc":[{"id":"安装","text":"安装","depth":2,"charIndex":21}],"frontmatter":{"title":"基础表单组件概览","overview":true},"version":""},{"title":"表单类型","content":"## 类型方法\n\n```ts title=\"src/common/interface.ts\"\nexport type MObject<T> = {\n    [K in keyof T]: T[K];\n};\nexport type MakeFieldRequired<T, K extends keyof T> = Omit<T, K> & Required<Pick<T, K>>;\n```\n\n## 实例\n\n```ts title=\"src/common/instance/index.ts\"\n\n\n\n/**表单实例*/\nexport declare class FairysValtioFormInstance<T extends MObject<T> = Record<string, any>> {\n    /**\n     * 表单值改变时回调\n     * @param path 表单项路径\n     * @param value 表单项值\n     */\n    onValuesChange?: (path: PropertyKey, value: any) => void;\n    /***\n     * 判断值是否为代理对象\n     * @param value 值\n     * @returns 是否为代理对象\n     */\n    isValtioProxy: (value: any) => boolean;\n    /**状态*/\n    state: T;\n    /**\n     * 错误信息\n     */\n    errorState: Record<PropertyKey, string[]>;\n    /**隐藏状态*/\n    hideState: Record<PropertyKey, boolean>;\n    /**初始化表单值*/\n    ctor: (options?: {\n        formData?: Partial<T>;\n        hideState?: Record<PropertyKey, boolean>;\n        initFormDataType?: FairysValtioFormAttrsProps[\"initFormDataType\"];\n    }) => void;\n    /**\n     * 更新数据\n     * @param state 更新数据对象\n     * @param isValidate 是否验证(可选)\n     */\n    updated: <M = T>(state: Partial<M>, isValidate?: boolean) => void;\n    /**根据路径设置值\n     * @param path 值路径\n     * @param value 值\n     */\n    updatedValueByPaths: (path: PropertyKey, value: any) => void;\n    /**表单项卸载移除保存值*/\n    removeValueByPaths: (path: PropertyKey) => void;\n    /**\n     * 清理值\n     */\n    clearValue: (fields?: PropertyKey[]) => this;\n    /**\n     * 更新行数据的隐藏信息\n     * @param objectHideInfo 行数据隐藏信息对象\n     */\n    updatedHideInfo: (objectHideInfo: Record<PropertyKey, boolean>) => this;\n    /**\n     * 清理隐藏信息\n     */\n    clearHideInfo: (fields?: PropertyKey[]) => this;\n    /**\n     * 更新行数据的错误信息\n     * @param objectErrorInfo 行数据错误信息对象\n     */\n    updatedErrorInfo: (objectErrorInfo: Record<PropertyKey, string[]>) => this;\n    /**\n     * 清理错误信息\n     */\n    clearErrorInfo: (fields?: PropertyKey[]) => this;\n    /**\n     * 清理所有数据\n     */\n    clear: () => void;\n    /**由表单项挂载规则,(根据表单项的字段存储路径对应校验规则)*/\n    mountRules: Record<PropertyKey, RuleItem[]>;\n    /**移除表单项挂载规则*/\n    removeRules: (name: PropertyKey) => void;\n    /**表单项规则*/\n    rules: Record<PropertyKey, RuleItem[]>;\n    /**表单项名称到路径映射*/\n    nameToPaths: Record<PropertyKey, PropertyKey[]>;\n    /**验证表单项规则\n     * @param fields 要验证的字段(可选)\n     * @param isReturn 是否返回验证结果(可选)\n     */\n    validate: (fields?: PropertyKey[], isReturn?: boolean) => Promise<ValidateFieldsError | Values | Partial<T>>;\n    /**\n     * 验证某些前缀的字段\n     * @param prefix 前缀字段数组\n     * @param isReturn 是否返回验证结果(可选)\n     */\n    validatePrefixFields: (prefix: string[], isReturn?: boolean) => Promise<ValidateFieldsError | Values>;\n}\n\n```\n\n***声明实例***\n\n```ts\n/**声明实例*/\nexport declare function useFairysValtioFormInstance<T extends MObject<T> = Record<string, any>>(instance?: FairysValtioFormInstance<T>): FairysValtioFormInstance<T>;\n```\n\n***表单实例上下文***\n\n```ts\n/**表单实例上下文*/\nexport declare const FairysValtioFormInstanceContext: import(\"react\").Context<FairysValtioFormInstance<any>>;\n```\n\n***获取表单实例上下文***\n\n```ts\n/**获取表单实例上下文*/\nexport declare function useFairysValtioFormInstanceContext<T extends MObject<T> = Record<string, any>>(): FairysValtioFormInstance<T>;\n```\n\n***状态取值***\n\n```ts\n/**状态取值*/\nexport declare function useFairysValtioFormInstanceContextState<T extends MObject<T> = Record<string, any>>(): [T, Record<PropertyKey, string[]>, FairysValtioFormInstance<T>, any, any];\n```\n\n***隐藏组件状态取值***\n\n```ts\n/**隐藏组件状态取值*/\nexport declare function useFairysValtioFormInstanceContextHideState<T extends MObject<T> = Record<string, any>>(): [Record<PropertyKey, boolean>, FairysValtioFormInstance<T>, any];\n```\n\n***传递表单实例获取状态***\n\n```ts\n/**\n * 传递表单实例获取状态\n */\nexport declare function useFairysValtioFormInstanceToState<T extends MObject<T> = Record<string, any>>(formInstance: FairysValtioFormInstance<T>): T;\n```\n\n***传递表单实例获取隐藏状态***\n\n```ts\n/**\n * 传递表单实例获取隐藏状态\n */\nexport declare function useFairysValtioFormInstanceToHideState<T extends MObject<T> = Record<string, any>>(formInstance: FairysValtioFormInstance<T>): Record<PropertyKey, boolean>;\n\n```\n\n## 获取父级表单项`name`属性值\n\n```ts title=\"src/common/hooks/index.ts\"\nexport interface FairysValtioFormParentAttrsState {\n    name?: string;\n}\n/***\n * 父级属性\n */\nexport declare class FairysValtioFormParentAttrs {\n    state: FairysValtioFormParentAttrsState;\n    updated: (attrs: Record<string, any>) => void;\n    /***更新父级字段值*/\n    updatedName: (name?: string, parentName?: string) => void;\n}\nexport interface FairysValtioFormAttrsNameOptions {\n    name?: string;\n    /**是否拼接父级字段名*/\n    isJoinParentField?: boolean;\n}\n```\n\n***初始化父级属性***\\*\\*\n\n```ts\n/**初始化父级属性*/\nexport declare const useFairysValtioFormParentAttrs: (instance?: FairysValtioFormParentAttrs) => FairysValtioFormParentAttrs;\n```\n\n***父级属性上下文***\n\n```ts\n/***父级属性上下文*/\nexport declare const FairysValtioFormParentAttrsContext: import(\"react\").Context<FairysValtioFormParentAttrs>;\n```\n\n***获取父级属性实例***\n\n```ts\n/**获取父级属性实例*/\nexport declare const useFairysValtioFormParentAttrsContext: () => FairysValtioFormParentAttrs;\n```\n\n***获取父级属性状态***\n\n```ts\n/**获取父级属性状态*/\nexport declare const useFairysValtioFormParentAttrsState: () => readonly [{\n    readonly name?: string;\n}, FairysValtioFormParentAttrs];\n\n```\n\n***获取属性名和路径***\n\n```ts\n/**获取属性名和路径*/\nexport declare const useFairysValtioFormAttrsName: (options?: FairysValtioFormAttrsNameOptions) => {\n    formAttrsNameInstance: FairysValtioFormParentAttrs;\n    parentName: string;\n    name: string;\n    paths: (number | symbol)[] | (string | number)[];\n};\n```\n\n## useId\n\n```ts title=\"src/common/hooks/index.ts\"\nexport declare const useId: (suffix?: string) => string;\n```\n\n## form\n\n````ts title=\"src/form/form.tsx\"\n\n\n\n\n\nexport interface FairysValtioFormAttrsProps<T extends MObject<T> = Record<string, any>> extends FairysValtioFormLayoutAttrsProps {\n    /**表单实例*/\n    form?: FairysValtioFormInstance<T>;\n    /**子元素*/\n    children: ReactNode;\n    /**表单项规则(如果表单项没有指定规则，则使用全局规则，如果表单项指定规则，则使用表单项规则)*/\n    rules?: Record<PropertyKey, RuleItem[]>;\n    /**表单初始值*/\n    formData?: FairysValtioFormInstance<T>['state'];\n    /**表单隐藏状态*/\n    hideState?: FairysValtioFormInstance<T>['hideState'];\n    /**\n     * 初始化表单数据类型，默认值为 deepCopy\n     * - deepCopy：使用深度拷贝初始化表单数据\n     * - immutable：直接使用对象(注意：当传递的不是`valtio`的`proxy`对象时，会使用`valtio`中的`proxy`声明)\n     */\n    initFormDataType?: 'deepCopy' | 'immutable';\n   /**\n     * 表单值改变时回调\n     * @param path 表单项路径\n     * @param value 表单项值\n     */\n    onValuesChange?: (path: PropertyKey, value: any) => void;\n}\n/**\n * 表单属性处理\n *\n * @example\n *\n * ```tsx\n\n\nexport interface FormProps extends FairysValtioFormAttrProps{}\n\nexport const Form = (props: FormProps) => {\n  const { formInstance,children, ...rest } = useFairysValtioForm(props)\n  return  (\n    <FairysValtioFormInstanceContext.Provider value={formInstance}>\n      <布局组件 {...rest}>{children}</布局组件>\n    </FairysValtioFormInstanceContext.Provider>\n  );\n}\n * ```\n*/\nexport declare function useFairysValtioForm<T extends MObject<T> = Record<string, any>>(props: FairysValtioFormAttrsProps<T>, ref: React.Ref<FairysValtioFormInstance<T>>): Omit<FairysValtioFormAttrsProps<T>, \"initFormDataType\" | \"form\" | \"rules\" | \"formData\" | \"hideState\" | \"onValuesChange\"> & {\n    formInstance: FairysValtioFormInstance<T>;\n};\n\n````\n\n## formItem\n\n```ts title=\"src/form/form.item.tsx\"\n/**表单项*/\n\n\n\n\n\n\nexport interface FairysValtioFormItemAttrsProps<T extends MObject<T> = Record<string, any>> {\n    /**平台*/\n    platform?: 'pc' | 'rn' | 'taro';\n    /**\n     * 表单项名称 ，字段需要和存储的字段路径一致\n     *\n     * @example\n     * 路径中的值为 number 类型时，会创建一个空数组。路径中的值为 string 类型时，会创建一个空对象。最后一个直接赋值\n     *\n     * 默认：\"name\"\n     * 嵌套字段：\"name.a.doc\" ===> { name: { a: { doc: undefined } } }\n     * 嵌套字段：\"name[1].a.doc\" ===> { name: [{}, { a: { doc: undefined } }] }\n     * 嵌套字段：\"name.a[2].doc\" ===> { name: { a: [{}, {}, { doc: undefined }] } }\n     */\n    name?: string;\n    /**表单项标签*/\n    label?: string;\n    /**传递组件字段*/\n    valuePropName?: string;\n    /**取值字段(默认 valuePropName字段值)*/\n    getValuePath?: string;\n    /**自定义获取值*/\n    getValueFromEvent?: (event: any, form: FairysValtioFormInstance<T>) => any;\n    /**值格式化*/\n    formatValue?: (value: any, form: FairysValtioFormInstance<T>, event: any) => any;\n    /**触发数据更新之后触发（用于数据联动之类的）*/\n    onAfterUpdate?: (value: any, form: FairysValtioFormInstance<T>, event: any) => void;\n    /**事件名称*/\n    trigger?: string;\n    className?: string;\n    style?: React.CSSProperties;\n    labelClassName?: string;\n    labelStyle?: React.CSSProperties;\n    bodyClassName?: string;\n    bodyStyle?: React.CSSProperties;\n    children?: React.ReactNode;\n    /**规则校验失败错误提示位置*/\n    errorLayout?: FairysValtioFormLayoutContextOptions['errorLayout'];\n    /**label显示模式*/\n    labelMode?: FairysValtioFormLayoutContextOptions['labelMode'];\n    /**额外内容*/\n    extra?: React.ReactNode;\n    /**底部提示内容*/\n    helpText?: React.ReactNode;\n    /**\n     * 表单项占据列数\n     * @default 1\n     */\n    colSpan?: number;\n    /**\n     * 表单项占据行数\n     * @default 1\n     */\n    rowSpan?: number;\n    /**是否必填*/\n    isRequired?: boolean;\n    /**是否显示冒号*/\n    showColon?: boolean;\n    /**底部显示边框*/\n    itemBorderType?: FairysValtioFormLayoutContextOptions['itemBorderType'];\n    /**边框颜色*/\n    itemBorderColor?: React.CSSProperties['borderColor'];\n    /**是否校验失败时显示红色边框*/\n    isInvalidBorderRed?: boolean;\n    /**是否校验失败时显示红色文本*/\n    isInvalidTextRed?: boolean;\n    /**输入框属性*/\n    attrs?: any;\n    /**是否拼接父级字段名*/\n    isJoinParentField?: boolean;\n    /**校验规则*/\n    rules?: RuleItem[];\n}\n\n```\n\n***表单项属性参数处理***\n\n````ts\n/**\n * 处理表单表单项属性\n *\n * @example\n *\n * ```tsx\n\n\n\nexport interface FormItemProps extends FairysValtioFormItemAttrsProps{}\n\nexport const FormItem = (props: FormItemProps) => {\n  const { label, extra, helpText } = props\n  const {\n    itemClassName, itemStyle, containerClassName, itemLabelClassName, itemLabelStyle,\n    itemBodyClassName, itemBodyStyle, itemInputClassName, itemExtraClassName, errorClassName, helpClassName,\n    isInvalid, itemBorderType, children, error,formAttrsNameInstance\n  } = useFairysValtioFormItemAttrs(props)\n\n  return (\n   <FairysValtioFormParentAttrsContext.Provider value={formAttrsNameInstance}>\n    <View className={itemClassName} style={itemStyle}>\n      <View className={containerClassName}>\n        <View className={itemLabelClassName} style={itemLabelStyle}>\n          {label}\n        </View>\n        <View className={itemBodyClassName} style={itemBodyStyle}>\n          <View className={itemInputClassName}>\n            {children}\n          </View>\n          {extra ? <View className={itemExtraClassName}>{extra}</View> : <Fragment />}\n          {itemBorderType === 'body' && isInvalid ? <View className={errorClassName}>{error}</View> : <Fragment />}\n        </View>\n      </View>\n      {helpText ? <View className={helpClassName}>{helpText}</View> : <Fragment />}\n      {isInvalid && itemBorderType !== 'body' ? <View className={errorClassName}>{error}</View> : <Fragment />}\n    </View>\n   </FairysValtioFormParentAttrsContext.Provider>\n  );\n}\n * ```\n *\n*/\nexport declare function useFairysValtioFormItemAttrs<T extends MObject<T> = Record<string, any>>(props: FairysValtioFormItemAttrsProps<T>): FairysValtioFormItemAttrsReturn<T>;\nexport interface FairysValtioFormItemAttrsReturn<T extends MObject<T> = Record<string, any>> {\n    /**表单项值*/\n    value?: any;\n    /**是否校验错误*/\n    isInvalid: boolean;\n    /**边框类型*/\n    itemBorderType: FairysValtioFormLayoutContextOptions['itemBorderType'];\n    /**值改变事件*/\n    onValueChange: (event: any) => void;\n    /**当前表单项占据列数*/\n    colSpan: number;\n    /**当前表单项占据行数*/\n    rowSpan: number;\n    /**列数*/\n    colCount: number;\n    /**标签显示模式*/\n    labelMode: FairysValtioFormLayoutContextOptions['labelMode'];\n    /**错误提示位置*/\n    errorLayout: FairysValtioFormLayoutContextOptions['errorLayout'];\n    /**是否必填*/\n    isRequired: boolean;\n    /**表单状态*/\n    state: T;\n    /**错误状态*/\n    errorState: Record<PropertyKey, string[]>;\n    /**表单实例*/\n    formInstance: FairysValtioFormInstance<T>;\n    /**错误信息*/\n    error?: string[];\n    /**拼接父级字段名后得到的表单项名称*/\n    _name?: string;\n    /**表单项名称*/\n    name?: string;\n    /**表单项ID*/\n    id?: string;\n    /**表单项路径*/\n    paths?: (string | number)[];\n    /**父级字段名*/\n    parentName?: string;\n    /**表单属性名实例*/\n    formAttrsNameInstance: FairysValtioFormParentAttrs;\n    /**表单项类名*/\n    itemClassName: string;\n    /**表单项样式*/\n    itemStyle: React.CSSProperties;\n    /**容器类名*/\n    containerClassName: string;\n    /**标签类名*/\n    itemLabelClassName: string;\n    /**标签样式*/\n    itemLabelStyle: React.CSSProperties;\n    /**体类名*/\n    itemBodyClassName: string;\n    /**体样式*/\n    itemBodyStyle: React.CSSProperties;\n    /**输入框类名*/\n    itemInputClassName: string;\n    /**额外内容类名*/\n    itemExtraClassName: string;\n    /**错误提示类名*/\n    errorClassName: string;\n    /**帮助提示类名*/\n    helpClassName: string;\n    /**子元素*/\n    children?: React.ReactNode;\n}\n\n````\n\n***没有样式的表单项属性，仅返回基础输入组件参数***\n\n````ts\n/**\n * 没有样式的表单项属性，仅返回基础输入组件参数\n *\n * @example\n *\n *```tsx\n\n\n\nexport interface FormItemProps extends FairysValtioFormItemAttrsProps{}\n\nexport const FormItem = (props: FormItemProps) => {\n  const { children , formAttrsNameInstance } = useFairysValtioFormItemNoStyleAttrs(props)\n  return <FairysValtioFormParentAttrsContext.Provider value={formAttrsNameInstance}>\n    {children}\n  </FairysValtioFormParentAttrsContext.Provider>\n}\n * ```\n*/\nexport declare function useFairysValtioFormItemNoStyleAttrs<T extends MObject<T> = Record<string, any>>(props: FairysValtioFormItemAttrsProps<T>): FairysValtioFormItemNoStyleAttrsReturn<T>;\nexport interface FairysValtioFormItemNoStyleAttrsReturn<T extends MObject<T> = Record<string, any>> {\n    /**表单项值*/\n    value?: any;\n    /**是否校验错误*/\n    isInvalid: boolean;\n    /**是否必填*/\n    isRequired: boolean;\n    /**错误信息*/\n    error?: string[];\n    /**值改变事件*/\n    onValueChange: (event: any) => void;\n    /**表单状态*/\n    state: T;\n    /**错误状态*/\n    errorState: Record<PropertyKey, string[]>;\n    /**表单实例*/\n    formInstance: FairysValtioFormInstance<T>;\n    /**拼接父级字段名后得到的表单项名称*/\n    _name?: string;\n    /**表单项名称*/\n    name?: string;\n    /**表单项ID*/\n    id?: string;\n    /**表单项路径*/\n    paths?: (string | number)[];\n    /**父级字段名*/\n    parentName?: string;\n    /**表单属性名实例*/\n    formAttrsNameInstance: FairysValtioFormParentAttrs;\n    /**子元素*/\n    children?: React.ReactNode;\n}\n````\n\n## layout\n\n```ts title=\"src/form/layout.tsx\"\nexport interface FairysValtioFormLayoutContextOptions {\n    /**平台*/\n    platform?: 'pc' | 'rn' | 'taro';\n    /**列数据*/\n    colCount?: number;\n    /**规则校验失败错误提示位置*/\n    errorLayout?: 'bottom-left' | 'bottom-right' | 'top-right' | 'top-left' | 'left-border-top' | 'right-border-top';\n    /**\n     * label显示模式\n     * @platform taro 支持 between\n     */\n    labelMode?: 'left' | 'top' | 'between';\n    /**表单项 className*/\n    formItemClassName?: string;\n    /**表单项 style*/\n    formItemStyle?: React.CSSProperties;\n    /**表单项 label  className*/\n    formItemLabelClassName?: string;\n    /**表单项 label  style*/\n    formItemLabelStyle?: React.CSSProperties;\n    /**表单项 body  className*/\n    formItemBodyClassName?: string;\n    /**表单项 body  style*/\n    formItemBodyStyle?: React.CSSProperties;\n    /**\n     * 底部边框类型\n     */\n    itemBorderType?: 'bottom' | 'body' | 'none';\n    /**边框颜色*/\n    itemBorderColor?: React.CSSProperties['borderColor'];\n    /**是否校验失败时显示红色边框*/\n    isInvalidBorderRed?: boolean;\n    /**是否校验失败时显示红色文本*/\n    isInvalidTextRed?: boolean;\n    /**是否显示冒号*/\n    showColon?: boolean;\n}\nexport interface FairysValtioFormLayoutAttrsProps extends FairysValtioFormLayoutContextOptions {\n    /**\n     * @description gap 属性是用来设置网格行与列之间的间隙，该属性是row-gap and column-gap的简写形式。\n     */\n    gap?: string | number;\n    /**标题*/\n    title?: React.ReactNode;\n    /**额外内容*/\n    extra?: React.ReactNode;\n    /**内容*/\n    children?: React.ReactNode;\n    /**是否占据整行*/\n    isAllColSpan?: boolean;\n    className?: string;\n    style?: React.CSSProperties;\n    /**头部ClassName*/\n    headerClassName?: string;\n    /**头部样式*/\n    headerStyle?: React.CSSProperties;\n    /**内容ClassName*/\n    bodyClassName?: string;\n    /**内容样式*/\n    bodyStyle?: React.CSSProperties;\n    /**是否边框*/\n    bordered?: boolean;\n    /**显示阴影*/\n    boxShadow?: boolean;\n    /**最后一个是否显示底部边框*/\n    lastItemBordered?: boolean;\n}\nexport declare class FairysValtioFormLayoutInstance {\n    state: FairysValtioFormLayoutContextOptions;\n    updated: (options?: FairysValtioFormLayoutContextOptions) => void;\n}\n\n```\n\n***初始化布局实例***\n\n```ts\nexport declare const useFairysValtioFormLayoutInstance: (instance?: FairysValtioFormLayoutInstance) => FairysValtioFormLayoutInstance;\n```\n\n***创建布局上下文***\n\n```ts\nexport declare const FairysValtioFormLayoutContext: import(\"react\").Context<FairysValtioFormLayoutInstance>;\n```\n\n***获取布局上下文***\n\n```ts\nexport declare const useFairysValtioFormLayoutContext: () => [FairysValtioFormLayoutContextOptions, FairysValtioFormLayoutInstance];\n```\n\n***布局参数处理***\n\n````ts\n/**\n * 布局属性处理\n *\n * @example\n *\n * ```tsx\n\n\n\n\nexport interface LayoutProps extends FairysValtioFormLayoutAttrsProps {}\n\nexport const Layout = (props: LayoutProps) => {\n  const { children, title, extra } = props\n  const {\n    formLayoutInstance,\n    layoutName, layoutStyle,\n    headerName, headerStyle,\n    headerTitleName, headerExtraName,\n    bodyName, bodyStyle\n  } = useFairysValtioFormLayoutAttrs(props)\n\n   return (\n     <FairysValtioFormLayoutContext.Provider value={formLayoutInstance}>\n       <div className={layoutName} style={layoutStyle}>\n         <div>\n           {title || extra ? (\n             <div style={headerStyle} className={headerName}>\n               <div className={headerTitleName}>{title}</div>\n               <div className={headerExtraName}>{extra}</div>\n             </div>\n           ) : (\n             <Fragment />\n           )}\n         </div>\n         <div className={bodyName} style={bodyStyle}>\n           {children}\n         </div>\n       </div>\n     </FairysValtioFormLayoutContext.Provider>\n   );\n}\n* ```\n*/\nexport declare function useFairysValtioFormLayoutAttrs(props: FairysValtioFormLayoutAttrsProps): FairysValtioFormLayoutAttrsReturn;\nexport interface FairysValtioFormLayoutAttrsReturn {\n    /**列数*/\n    colCount: number;\n    /**规则校验失败错误提示位置*/\n    errorLayout: string;\n    /**\n     * label显示模式\n     * @platform taro 支持 between\n     */\n    labelMode: string;\n    /**\n     * 底部边框类型\n     */\n    itemBorderType: string;\n    /**表单布局实例*/\n    formLayoutInstance: FairysValtioFormLayoutInstance;\n    /**布局ClassName*/\n    layoutName: string;\n    /**布局样式*/\n    layoutStyle: React.CSSProperties;\n    /**头部ClassName*/\n    headerName: string;\n    /**头部样式*/\n    headerStyle: React.CSSProperties;\n    /**头部标题ClassName*/\n    headerTitleName: string;\n    /**头部额外内容ClassName*/\n    headerExtraName: string;\n    /**内容ClassName*/\n    bodyName: string;\n    /**内容样式*/\n    bodyStyle: React.CSSProperties;\n}\n````\n\n## utils\n\n```ts title=\"src/common/utils/index.ts\"\n/***\n * 设置值\n * @param object 任意对象\n * @param paths 值路径\n * @param nextValue 新值\n *\n * @description\n * 值不存在时，当 paths 路径中的值为 number 类型时，会创建一个空数组。当 paths 路径中的值为 string 类型时，会创建一个空对象。\n */\nexport declare function set<T>(state: any, paths: PropertyKey[], nextValue: T): any;\n/***\n * 获取值\n * @param value 任意值\n * @param segments 键路径\n */\nexport declare function get<TDefault = unknown>(value: any, segments: PropertyKey[]): TDefault;\n/***\n * 格式化路径，将路径中的数组索引转换为数字\n * @param path 路径\n * @returns 格式化后的路径\n */\nexport declare function formatePath(path: PropertyKey): (number | symbol)[] | (string | number)[];\n/***\n * 移除值\n * @param value 任意值\n * @param segments 键路径\n */\nexport declare function removeValueByPaths(value: any, segments: PropertyKey[]): void;\n/**格式化属性名*/\nexport declare function formateName(name?: string, parentName?: string): string;\n/***\n * 是否为对象\n * @param x 任意值\n * @returns 是否为对象\n */\nexport declare const isObject: (x: unknown) => x is object;\n```\n","routePath":"/basic-form/interface","lang":"zh","toc":[{"id":"类型方法","text":"类型方法","depth":2,"charIndex":0},{"id":"实例","text":"实例","depth":2,"charIndex":197},{"id":"获取父级表单项name属性值","text":"获取父级表单项`name`属性值","depth":2,"charIndex":4067},{"id":"useid","text":"useId","depth":2,"charIndex":5510},{"id":"form","text":"form","depth":2,"charIndex":5622},{"id":"formitem","text":"formItem","depth":2,"charIndex":7249},{"id":"layout","text":"layout","depth":2,"charIndex":14272},{"id":"utils","text":"utils","depth":2,"charIndex":18774}],"frontmatter":{"title":"表单类型"},"version":""},{"title":"使用基础表单组件","content":"## 布局组件\n\n```tsx\n\n\n\n\nexport interface FormLayoutProps extends FairysValtioFormLayoutAttrsProps { }\n\nexport function FormLayout(props: FormLayoutProps) {\n  const { children, title, extra } = props;\n  const {\n    formLayoutInstance,\n    layoutName,\n    layoutStyle,\n    headerName,\n    headerStyle,\n    headerTitleName,\n    headerExtraName,\n    bodyName,\n    bodyStyle,\n  } = useFairysValtioFormLayoutAttrs(props);\n\n  return (\n    <FairysValtioFormLayoutContext.Provider value={formLayoutInstance}>\n      <div className={layoutName} style={layoutStyle}>\n        {title || extra ? (\n          <div style={headerStyle} className={headerName}>\n            <div className={headerTitleName}>{title}</div>\n            <div className={headerExtraName}>{extra}</div>\n          </div>\n        ) : (\n          <Fragment />\n        )}\n        <div className={bodyName} style={bodyStyle}>\n          {children}\n        </div>\n      </div>\n    </FairysValtioFormLayoutContext.Provider>\n  );\n}\n\n```\n\n## 表单组件\n\n```tsx\n\n\nimport {\n  useFairysValtioForm,\n  FairysValtioFormInstanceContext,\n  useFairysValtioFormInstance,\n  useFairysValtioFormInstanceContext,\n  useFairysValtioFormInstanceContextState,\n  useFairysValtioFormInstanceContextHideState,\n} from '@fairys/valtio-form-basic';\n\n\nexport interface FormProps<T extends MObject<T> = Record<string, any>> extends FairysValtioFormAttrsProps<T> {}\n\nfunction FormBase<T extends MObject<T> = Record<string, any>>(\n  props: FormProps<T>,\n  ref: React.Ref<FairysValtioFormInstance<T>>,\n) {\n  const {\n    formInstance,\n    children,\n    colCount = 4,\n    labelMode = 'top',\n    errorLayout = 'bottom-left',\n    itemBorderType = 'none',\n    platform = 'pc',\n    ...rest\n  } = useFairysValtioForm(props, ref);\n  return (\n    <FairysValtioFormInstanceContext.Provider value={formInstance}>\n      <FormLayout\n        {...rest}\n        colCount={colCount}\n        labelMode={labelMode}\n        itemBorderType={itemBorderType}\n        errorLayout={errorLayout}\n        platform={platform}\n      >\n        {children}\n      </FormLayout>\n    </FairysValtioFormInstanceContext.Provider>\n  );\n}\nexport const Form = React.forwardRef(FormBase)\n\n```\n\n## 表单项\n\n```tsx\n\n\nimport {\n  useFairysValtioFormItemAttrs,\n  useFairysValtioFormInstanceContextHideState,\n  useFairysValtioFormItemNoStyleAttrs,\n  FairysValtioFormParentAttrsContext,\n} from '@fairys/valtio-form-basic';\n\nexport interface FormItemProps<T extends MObject<T> = Record<string, any>>\n  extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>,\n    FairysValtioFormItemAttrsProps {\n  /**是否使用控制隐藏的表单项*/\n  isHide?: boolean;\n  /**是否使用无样式表单项*/\n  noStyle?: boolean;\n}\n\n/**普通表单项*/\nexport function FormItemBase<T extends MObject<T> = Record<string, any>>(\n  props: Omit<FormItemProps<T>, 'isHide' | 'noStyle'>,\n) {\n  const { label, extra, helpText } = props;\n  const {\n    itemClassName,\n    itemStyle,\n    containerClassName,\n    itemLabelClassName,\n    itemLabelStyle,\n    itemBodyClassName,\n    itemBodyStyle,\n    itemInputClassName,\n    itemExtraClassName,\n    errorClassName,\n    helpClassName,\n    isInvalid,\n    children,\n    error,\n    formAttrsNameInstance,\n    id,\n  } = useFairysValtioFormItemAttrs(props);\n\n  return (\n    <div className={itemClassName} style={itemStyle}>\n      <div className={containerClassName}>\n        {label ? (\n          <label htmlFor={id} className={itemLabelClassName} style={itemLabelStyle}>\n            {label}\n          </label>\n        ) : (\n          <Fragment />\n        )}\n        <div className={itemBodyClassName} style={itemBodyStyle}>\n          <FairysValtioFormParentAttrsContext.Provider value={formAttrsNameInstance}>\n            <div className={itemInputClassName}>{children}</div>\n          </FairysValtioFormParentAttrsContext.Provider>\n          {extra ? <div className={itemExtraClassName}>{extra}</div> : <Fragment />}\n        </div>\n      </div>\n      {helpText ? <div className={helpClassName}>{helpText}</div> : <Fragment />}\n      {isInvalid ? <div className={errorClassName}>{error}</div> : <Fragment />}\n    </div>\n  );\n}\n/**控制隐藏的表单项*/\nexport function FormHideItem<T extends MObject<T> = Record<string, any>>(\n  props: Omit<FormItemProps<T>, 'isHide' | 'noStyle'>,\n) {\n  const [state] = useFairysValtioFormInstanceContextHideState();\n  const isHide = state[props.name];\n  if (isHide) {\n    return <Fragment />;\n  }\n  return <FormItemBase<T> {...props} />;\n}\n\n/**无样式表单项*/\nexport function FormItemNoStyle<T extends MObject<T> = Record<string, any>>(\n  props: Omit<FormItemProps<T>, 'isHide' | 'noStyle'>,\n) {\n  const { children, formAttrsNameInstance } = useFairysValtioFormItemNoStyleAttrs(props);\n  return (\n    <FairysValtioFormParentAttrsContext.Provider value={formAttrsNameInstance}>\n      {children}\n    </FairysValtioFormParentAttrsContext.Provider>\n  );\n}\n\n/**表单项基础组件(根据isHide和noStyle判断是否使用控制隐藏的表单项和无样式表单项)*/\nexport function FormItem<T extends MObject<T> = Record<string, any>>(props: FormItemProps<T>) {\n  const { isHide, noStyle, ...rest } = props;\n  if (isHide) {\n    return <FormHideItem<T> {...rest} />;\n  }\n  if (noStyle) {\n    return <FormItemNoStyle<T> {...rest} />;\n  }\n  return <FormItemBase<T> {...rest} />;\n}\n\n```\n","routePath":"/basic-form/use","lang":"zh","toc":[{"id":"布局组件","text":"布局组件","depth":2,"charIndex":0},{"id":"表单组件","text":"表单组件","depth":2,"charIndex":982},{"id":"表单项","text":"表单项","depth":2,"charIndex":2161}],"frontmatter":{"title":"使用基础表单组件"},"version":""},{"title":"基础表单组件概览（PC）","content":"组合基础表单组件，使其直接配置即可使用\n\n## 安装\n\n```bash\nnpm install @fairys/pc-valtio-form-basic  # yarn add @fairys/pc-valtio-form-basic # pnpm add @fairys/pc-valtio-form-basic\n```\n","routePath":"/pc-form/","lang":"zh","toc":[{"id":"安装","text":"安装","depth":2,"charIndex":21}],"frontmatter":{"title":"基础表单组件概览（PC）","overview":true},"version":""},{"title":"表单参数","content":"## 类型\n\n部分参数依赖[基础表单组件概览]()\n\n**布局**\n\n```ts\n\nexport interface FairysPCValtioFormLayoutProps extends FairysValtioFormLayoutAttrsProps {}\nexport declare function FairysPCValtioFormLayout(props: FairysPCValtioFormLayoutProps): import(\"react/jsx-runtime\").JSX.Element;\n```\n\n**表单项**\n\n```ts\n/**表单项*/\n\nexport interface FairysPCValtioFormItemProps<T extends MObject<T> = Record<string, any>> extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>, FairysValtioFormItemAttrsProps {\n    /**是否使用控制隐藏的表单项*/\n    isHide?: boolean;\n    /**是否使用无样式表单项*/\n    noStyle?: boolean;\n}\n/**普通表单项*/\nexport declare function FairysPCValtioFormItemBase<T extends MObject<T> = Record<string, any>>(props: Omit<FairysPCValtioFormItemProps<T>, 'isHide' | 'noStyle'>): import(\"react/jsx-runtime\").JSX.Element;\n/**控制隐藏的表单项*/\nexport declare function FairysPCValtioFormHideItem<T extends MObject<T> = Record<string, any>>(props: Omit<FairysPCValtioFormItemProps<T>, 'isHide' | 'noStyle'>): import(\"react/jsx-runtime\").JSX.Element;\n/**无样式表单项*/\nexport declare function FairysPCValtioFormItemNoStyle<T extends MObject<T> = Record<string, any>>(props: Omit<FairysPCValtioFormItemProps<T>, 'isHide' | 'noStyle'>): import(\"react/jsx-runtime\").JSX.Element;\n/**表单项基础组件(根据isHide和noStyle判断是否使用控制隐藏的表单项和无样式表单项)*/\nexport declare function FairysPCValtioFormItem<T extends MObject<T> = Record<string, any>>(props: FairysPCValtioFormItemProps<T>): import(\"react/jsx-runtime\").JSX.Element;\n```\n\n**表单**\n\n```ts\n\n\n\nexport interface FairysPCValtioFormProps<T extends MObject<T> = Record<string, any>> extends FairysValtioFormAttrsProps<T> {}\n\ndeclare function FairysPCValtioFormBase<T extends MObject<T> = Record<string, any>>(props: FairysPCValtioFormProps<T>, ref: React.Ref<FairysValtioFormInstance<T>>): import(\"react/jsx-runtime\").JSX.Element;\n\nexport declare const FairysPCValtioForm: typeof FairysPCValtioFormBase & {\n    /**初始化实例*/\n    useForm: typeof useFairysValtioFormInstance;\n    /**获取状态*/\n    useFormState: typeof useFairysValtioFormInstanceContextState;\n    /**获取隐藏状态*/\n    useFormHideState: typeof useFairysValtioFormInstanceContextHideState;\n    /**获取上下文实例*/\n    useFormInstance: typeof useFairysValtioFormInstanceContext;\n    /**表单项基础组件*/\n    FormItemBase: typeof FairysPCValtioFormItemBase;\n    /**表单项组件*/\n    FormItem: typeof FairysPCValtioFormItem;\n    /**隐藏表单项组件*/\n    FormHideItem: typeof FairysPCValtioFormHideItem;\n};\n\n```\n","routePath":"/pc-form/interface","lang":"zh","toc":[{"id":"类型","text":"类型","depth":2,"charIndex":0}],"frontmatter":{"title":"表单参数"},"version":""},{"title":"案例","content":"## 样式引入\n\n```ts\nimport '@fairys/valtio-form-basic/esm/styles/index.css';\n```\n\n## 基础使用\n\n```tsx\n\n\ninterface State {\n  username?: string;\n  \"username2\"?: string;\n}\nconst Basice = () => {\n  const form = FairysPCValtioForm.useForm<State>();\n\n  const onSubmit = async () => {\n    try {\n      const values = await form.validate();\n      console.log(values);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <div>\n      <FairysPCValtioForm<State>\n        form={form}\n        rules={{\n          username: [{ required: true, message: '请输入用户名' }],\n        }}\n      >\n        <FairysPCValtioForm.FormItem label=\"用户名\" name=\"username\">\n          <Input placeholder=\"请输入\" />\n        </FairysPCValtioForm.FormItem>\n        <FairysPCValtioForm.FormItem\n          label=\"用户名2\"\n          name=\"username2\"\n          rules={[{ required: true, message: '请输入用户名2' }]}\n        >\n          <Input placeholder=\"请输入\" />\n        </FairysPCValtioForm.FormItem>\n      </FairysPCValtioForm>\n      <Button onClick={onSubmit}>提交</Button>\n    </div>\n  );\n};\n\nexport default Basice;\n```\n\n## 隐藏表单项\n\n```tsx\n\n\ninterface State {\n  username?: string;\n  \"隐藏表单项\"?: string;\n}\n\nconst Basice = () => {\n  const form = FairysPCValtioForm.useForm<State>();\n\n  const onSubmit = async () => {\n    try {\n      const values = await form.validate();\n      console.log(values);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <div>\n      <FairysPCValtioForm<State>\n        form={form}\n        rules={{\n          username: [{ required: true, message: '请输入用户名' }],\n        }}\n      >\n        <FairysPCValtioForm.FormItem\n          label=\"输入5隐藏表单项\"\n          name=\"username\"\n          onAfterUpdate={(value) => {\n            console.log('value', value);\n            form.updatedHideInfo({ 隐藏表单项: value === '5' });\n          }}\n        >\n          <Input placeholder=\"请输入内容5\" />\n        </FairysPCValtioForm.FormItem>\n        <FairysPCValtioForm.FormHideItem\n          label=\"隐藏表单项\"\n          name=\"隐藏表单项\"\n          rules={[{ required: true, message: '请输入隐藏表单项' }]}\n        >\n          <Input placeholder=\"请输入\" />\n        </FairysPCValtioForm.FormHideItem>\n      </FairysPCValtioForm>\n      <Button onClick={onSubmit}>提交</Button>\n    </div>\n  );\n};\n\nexport default Basice;\n\n```\n\n## 监听数据渲染\n\n```tsx\n\n\n\ninterface State {\n  username?: string;\n}\n\nconst Cusotm = () => {\n  const [formState] = FairysPCValtioForm.useFormState<State>();\n  return <span>{formState.username}</span>;\n};\n\nconst Basice = () => {\n  const form = FairysPCValtioForm.useForm<State>();\n  const onSubmit = async () => {\n    try {\n      const values = await form.validate();\n      console.log(values);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const formState = FairysPCValtioForm.useFormInstanceToState(form);\n\n  return (\n    <div>\n      <div>用户名：{formState.username}</div>\n      <FairysPCValtioForm<State>\n        form={form}\n        rules={{\n          username: [{ required: true, message: '请输入用户名' }],\n        }}\n      >\n        <FairysPCValtioForm.FormItem label=\"用户名\" name=\"username\">\n          <Input placeholder=\"请输入用户名\" />\n        </FairysPCValtioForm.FormItem>\n        <FairysPCValtioForm.FormHideItem label=\"监听数据渲染\">\n          <Cusotm />\n        </FairysPCValtioForm.FormHideItem>\n      </FairysPCValtioForm>\n      <Button onClick={onSubmit}>提交</Button>\n    </div>\n  );\n};\n\nexport default Basice;\n\n```\n","routePath":"/pc-form/use","lang":"zh","toc":[{"id":"样式引入","text":"样式引入","depth":2,"charIndex":0},{"id":"基础使用","text":"基础使用","depth":2,"charIndex":77},{"id":"隐藏表单项","text":"隐藏表单项","depth":2,"charIndex":1078},{"id":"监听数据渲染","text":"监听数据渲染","depth":2,"charIndex":2273}],"frontmatter":{"title":"案例"},"version":""},{"title":"基础表单组件概览（React Native）","content":"组合基础表单组件，使其直接配置即可使用\n\n## 安装\n\n```bash\nnpm install @fairys/rn-valtio-form-basic # yarn add @fairys/rn-valtio-form-basic # pnpm add @fairys/rn-valtio-form-basic\n```\n","routePath":"/rn-form/","lang":"zh","toc":[{"id":"安装","text":"安装","depth":2,"charIndex":21}],"frontmatter":{"title":"基础表单组件概览（React Native）","overview":true},"version":""},{"title":"表单参数","content":"## 重写样式部分\n\n**布局**\n\n```ts\n\n\nexport interface FairysValtioFormLayoutContextOptions extends Omit<_FairysValtioFormLayoutContextOptions, 'formItemStyle' | 'formItemLabelStyle' | 'formItemBodyStyle' | 'formItemClassName' | 'formItemLabelClassName' | 'formItemBodyClassName' | ''> {\n    /**表单项 style*/\n    formItemStyle?: ViewProps['style'];\n    /**表单项 label  style*/\n    formItemLabelStyle?: ViewProps['style'];\n    /**表单项 body  style*/\n    formItemBodyStyle?: ViewProps['style'];\n}\nexport interface FairysValtioFormLayoutAttrsProps extends FairysValtioFormLayoutContextOptions {\n    /**\n     * @description gap 属性是用来设置网格行与列之间的间隙，该属性是row-gap and column-gap的简写形式。\n     */\n    gap?: string | number;\n    /**标题*/\n    title?: React.ReactNode;\n    /**额外内容*/\n    extra?: React.ReactNode;\n    /**内容*/\n    children?: React.ReactNode;\n    /**布局样式*/\n    style?: ViewProps['style'];\n    /**头部样式*/\n    headerStyle?: ViewProps['style'];\n    headerTextStyle?: ViewProps['style'];\n    /**额外内容样式*/\n    headerExtraStyle?: ViewProps['style'];\n    /**内容样式*/\n    bodyStyle?: ViewProps['style'];\n    /**是否边框*/\n    bordered?: boolean;\n}\nexport declare class FairysValtioFormLayoutInstance {\n    state: FairysValtioFormLayoutContextOptions;\n    updated: (options?: FairysValtioFormLayoutContextOptions) => void;\n}\n/**初始化实例*/ \nexport declare const useFairysValtioFormLayoutInstance: (instance?: FairysValtioFormLayoutInstance) => FairysValtioFormLayoutInstance;\n/**布局上下文*/\nexport declare const FairysValtioFormLayoutContext: import(\"react\").Context<FairysValtioFormLayoutInstance>;\n/**获取布局上下文*/\nexport declare const useFairysValtioFormLayoutContext: () => [FairysValtioFormLayoutContextOptions, FairysValtioFormLayoutInstance];\n/**\n * 布局属性处理\n*/\nexport declare function useFairysValtioFormLayoutAttrs(props: FairysValtioFormLayoutAttrsProps): FairysValtioFormLayoutAttrsReturn;\nexport interface FairysValtioFormLayoutAttrsReturn {\n    /**列数*/\n    colCount: number;\n    /**规则校验失败错误提示位置*/\n    errorLayout: string;\n    /**\n     * label显示模式\n     * @platform RN 支持 between\n     */\n    labelMode: string;\n    /**\n     * 底部边框类型\n     */\n    itemBorderType: string;\n    /**表单布局实例*/\n    formLayoutInstance: FairysValtioFormLayoutInstance;\n    /**布局样式*/\n    layoutStyle: ViewProps['style'];\n    /**头部样式*/\n    headerStyle: ViewProps['style'];\n    /**头部标题样式*/\n    headerTitleStyle: ViewProps['style'];\n    /**头部额外内容样式*/\n    headerExtraStyle: ViewProps['style'];\n    /**内容样式*/\n    bodyStyle: ViewProps['style'];\n}\n```\n\n**表单项**\n\n```ts\n/**表单项*/\n\n\n\n\n\nexport interface FairysValtioFormItemAttrsProps<T extends MObject<T> = Record<string, any>> extends Omit<_FairysValtioFormItemAttrsProps<T>, 'style' | 'labelStyle' | 'bodyStyle' | 'rowSpan' | 'className' | 'labelClassName' | 'bodyClassName'> {\n    style?: ViewProps['style'];\n    labelStyle?: ViewProps['style'];\n    bodyStyle?: ViewProps['style'];\n}\n/**\n * 处理表单表单项属性\n *\n*/\nexport declare function useFairysValtioFormItemAttrs<T extends MObject<T> = Record<string, any>>(props: FairysValtioFormItemAttrsProps<T>): FairysValtioFormItemAttrsReturn<T>;\nexport interface FairysValtioFormItemAttrsReturn<T extends MObject<T> = Record<string, any>> {\n    /**表单项值*/\n    value?: any;\n    /**是否校验错误*/\n    isInvalid: boolean;\n    /**边框类型*/\n    itemBorderType: FairysValtioFormLayoutContextOptions['itemBorderType'];\n    /**值改变事件*/\n    onValueChange: (event: any) => void;\n    /**当前表单项占据列数*/\n    colSpan: number;\n    /**列数*/\n    colCount: number;\n    /**标签显示模式*/\n    labelMode: FairysValtioFormLayoutContextOptions['labelMode'];\n    /**错误提示位置*/\n    errorLayout: FairysValtioFormLayoutContextOptions['errorLayout'];\n    /**是否必填*/\n    isRequired: boolean;\n    /**表单状态*/\n    state: T;\n    /**错误状态*/\n    errorState: Record<PropertyKey, string[]>;\n    /**表单实例*/\n    formInstance: FairysValtioFormInstance<T>;\n    /**错误信息*/\n    error?: string[];\n    /**拼接父级字段名后得到的表单项名称*/\n    _name?: string;\n    /**表单项名称*/\n    name?: string;\n    /**表单项ID*/\n    id?: string;\n    /**表单项路径*/\n    paths?: (string | number)[];\n    /**父级字段名*/\n    parentName?: string;\n    /**表单属性名实例*/\n    formAttrsNameInstance: FairysValtioFormParentAttrs;\n    /**是否显示冒号*/\n    showColon: boolean;\n    // 基础样式\n    /**表单项样式*/\n    itemStyle: ViewProps['style'];\n    /**表单项容器样式*/\n    itemContainerStyle: ViewProps['style'];\n    /**表单项标签样式*/\n    itemLabelStyle: ViewProps['style'];\n    /**表单项标签文本样式*/\n    itemLabelTextStyle: ViewProps['style'];\n    /**表单项标签显示冒号样式*/\n    itemLabelShowColonStyle: ViewProps['style'];\n    /**表单项主体样式*/\n    itemBodyStyle: ViewProps['style'];\n    /**表单项输入样式*/\n    itemInputStyle: ViewProps['style'];\n    /**表单项额外样式*/\n    itemExtraStyle: ViewProps['style'];\n    /**错误样式*/\n    errorStyle: ViewProps['style'];\n    /**帮助样式*/\n    helpStyle: ViewProps['style'];\n    /**子元素*/\n    children?: React.ReactNode;\n}\n/**\n * 没有样式的表单项属性，仅返回基础输入组件参数\n*/\nexport declare function useFairysValtioFormItemNoStyleAttrs<T extends MObject<T> = Record<string, any>>(props: FairysValtioFormItemAttrsProps<T>): FairysValtioFormItemNoStyleAttrsReturn<T>;\nexport interface FairysValtioFormItemNoStyleAttrsReturn<T extends MObject<T> = Record<string, any>> {\n    /**表单项值*/\n    value?: any;\n    /**是否校验错误*/\n    isInvalid: boolean;\n    /**是否必填*/\n    isRequired: boolean;\n    /**错误信息*/\n    error?: string[];\n    /**值改变事件*/\n    onValueChange: (event: any) => void;\n    /**表单状态*/\n    state: T;\n    /**错误状态*/\n    errorState: Record<PropertyKey, string[]>;\n    /**表单实例*/\n    formInstance: FairysValtioFormInstance<T>;\n    /**拼接父级字段名后得到的表单项名称*/\n    _name?: string;\n    /**表单项名称*/\n    name?: string;\n    /**表单项ID*/\n    id?: string;\n    /**表单项路径*/\n    paths?: (string | number)[];\n    /**父级字段名*/\n    parentName?: string;\n    /**表单属性名实例*/\n    formAttrsNameInstance: FairysValtioFormParentAttrs;\n    /**子元素*/\n    children?: React.ReactNode;\n}\n```\n\n**表单**\n\n```ts\n\n\n\n\n\nexport interface FairysValtioFormAttrsProps<T extends MObject<T> = Record<string, any>> extends FairysValtioFormLayoutAttrsProps {\n    /**表单实例*/\n    form?: FairysValtioFormInstance<T>;\n    /**子元素*/\n    children: ReactNode;\n    /**表单项规则(如果表单项没有指定规则，则使用全局规则，如果表单项指定规则，则使用表单项规则)*/\n    rules?: Record<PropertyKey, RuleItem[]>;\n    /**表单初始值*/\n    formData?: FairysValtioFormInstance<T>['state'];\n    /**表单隐藏状态*/\n    hideState?: FairysValtioFormInstance<T>['hideState'];\n    /**\n     * 初始化表单数据类型，默认值为 deepCopy\n     * - deepCopy：使用深度拷贝初始化表单数据\n     * - immutable：直接使用对象(注意：当传递的不是`valtio`的`proxy`对象时，会使用`valtio`中的`proxy`声明)\n     */\n    initFormDataType?: 'deepCopy' | 'immutable';\n}\n/**\n * 表单属性处理\n*/\nexport declare function useFairysValtioForm<T extends MObject<T> = Record<string, any>>(props: FairysValtioFormAttrsProps<T>, ref: React.Ref<FairysValtioFormInstance<T>>): Omit<FairysValtioFormAttrsProps<T>, \"initFormDataType\" | \"form\" | \"rules\" | \"formData\" | \"hideState\"> & {\n    formInstance: FairysValtioFormInstance<T>;\n};\n\n```\n\n## 类型\n\n部分参数依赖[基础表单组件概览]()\n\n**布局**\n\n```ts\n\nexport interface FairysRNValtioFormLayoutProps extends FairysValtioFormLayoutAttrsProps {}\nexport declare function FairysRNValtioFormLayout(props: FairysRNValtioFormLayoutProps): import(\"react/jsx-runtime\").JSX.Element;\n\n```\n\n**表单项**\n\n```ts\n/**表单项*/\n\n\n\nexport interface FairysRNValtioFormItemProps<T extends MObject<T> = Record<string, any>> extends Omit<ViewProps, 'style'>, FairysValtioFormItemAttrsProps {\n    /**是否使用控制隐藏的表单项*/\n    isHide?: boolean;\n    /**是否使用无样式表单项*/\n    noStyle?: boolean;\n}\n/**普通表单项*/\nexport declare function FairysRNValtioFormItemBase<T extends MObject<T> = Record<string, any>>(props: Omit<FairysRNValtioFormItemProps<T>, 'isHide' | 'noStyle'>): import(\"react/jsx-runtime\").JSX.Element;\n/**控制隐藏的表单项*/\nexport declare function FairysRNValtioFormHideItem<T extends MObject<T> = Record<string, any>>(props: Omit<FairysRNValtioFormItemProps<T>, 'isHide' | 'noStyle'>): import(\"react/jsx-runtime\").JSX.Element;\n/**无样式表单项*/\nexport declare function FairysRNValtioFormItemNoStyle<T extends MObject<T> = Record<string, any>>(props: Omit<FairysRNValtioFormItemProps<T>, 'isHide' | 'noStyle'>): import(\"react/jsx-runtime\").JSX.Element;\n/**表单项基础组件(根据isHide和noStyle判断是否使用控制隐藏的表单项和无样式表单项)*/\nexport declare function FairysRNValtioFormItem<T extends MObject<T> = Record<string, any>>(props: FairysRNValtioFormItemProps<T>): import(\"react/jsx-runtime\").JSX.Element;\n\n```\n\n**表单**\n\n```ts\n\n\n\n\n\nexport interface FairysRNValtioFormProps<T extends MObject<T> = Record<string, any>> extends FairysValtioFormAttrsProps<T> {\n}\ndeclare function FairysRNValtioFormBase<T extends MObject<T> = Record<string, any>>(props: FairysRNValtioFormProps<T>, ref: React.Ref<FairysValtioFormInstance<T>>): import(\"react/jsx-runtime\").JSX.Element;\nexport declare const FairysRNValtioForm: typeof FairysRNValtioFormBase & {\n    /**初始化实例*/\n    useForm: typeof useFairysValtioFormInstance;\n    /**获取状态*/\n    useFormState: typeof useFairysValtioFormInstanceContextState;\n    /**获取隐藏状态*/\n    useFormHideState: typeof useFairysValtioFormInstanceContextHideState;\n    /**获取上下文实例*/\n    useFormInstance: typeof useFairysValtioFormInstanceContext;\n    /**表单项基础组件*/\n    FormItemBase: typeof FairysRNValtioFormItemBase;\n    /**表单项组件*/\n    FormItem: typeof FairysRNValtioFormItem;\n    /**隐藏表单项组件*/\n    FormHideItem: typeof FairysRNValtioFormHideItem;\n};\n```\n","routePath":"/rn-form/interface","lang":"zh","toc":[{"id":"重写样式部分","text":"重写样式部分","depth":2,"charIndex":0},{"id":"类型","text":"类型","depth":2,"charIndex":6821}],"frontmatter":{"title":"表单参数"},"version":""},{"title":"案例","content":"## 基础使用\n\n```tsx\n\n\ninterface State {\n  username?: string;\n  username2?: string;\n  username3?: string;\n  username4?: string;\n}\n\nfunction Basic() {\n  const form = FairysRNValtioForm.useForm<State>();\n\n  const onSubmit = async () => {\n    try {\n      const values = await form.validate();\n      console.log(values);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <View style={{ padding: 20 }}>\n      <FairysRNValtioForm<State>\n        form={form}\n        rules={{\n          username: [{ required: true, message: '请输入用户名' }],\n        }}\n      >\n        <FairysRNValtioForm.FormItem name=\"username\" label=\"用户名\">\n          <TextInput placeholder=\"请输入\" />\n        </FairysRNValtioForm.FormItem>\n        <FairysRNValtioForm.FormItem rules={[{ required: true, message: '请输入用户名2' }]} name=\"username2\" label=\"用户名2\">\n          <TextInput placeholder=\"请输入\" />\n        </FairysRNValtioForm.FormItem>\n        <FairysRNValtioForm.FormItem rules={[{ required: true, message: '请输入用户名3' }]} name=\"username3\" label=\"用户名3\">\n          <TextInput placeholder=\"请输入\" />\n        </FairysRNValtioForm.FormItem>\n        <FairysRNValtioForm.FormItem rules={[{ required: true, message: '请输入用户名4' }]} name=\"username4\" label=\"用户名4\">\n          <TextInput placeholder=\"请输入\" />\n        </FairysRNValtioForm.FormItem>\n        <TouchableOpacity onPress={onSubmit}>\n          <Text>提交</Text>\n        </TouchableOpacity>\n      </FairysRNValtioForm>\n    </View>\n  );\n}\nexport default Basic;\n```\n\n## 监听数据渲染\n\n```tsx\n\n\ninterface State {\n  username?: string;\n}\n\nconst Cusotm = () => {\n  const [formState] = FairysRNValtioForm.useFormState<State>();\n  return <View><Text>{formState.username}</Text></View>;\n};\n\nfunction Basic() {\n  const form = FairysRNValtioForm.useForm();\n\n  const onSubmit = async () => {\n    try {\n      const values = await form.validate();\n      console.log(values);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const formState = FairysRNValtioForm.useFormInstanceToState(form);\n\n  return (\n    <View style={{ padding: 20 }}>\n      <View>用户名：{formState.username}</View>\n      <FairysRNValtioForm\n        form={form}\n        rules={{\n          username: [{ required: true, message: '请输入用户名' }],\n        }}\n      >\n        <FairysRNValtioForm.FormItem name=\"username\" label=\"用户名\">\n          <TextInput placeholder=\"请输入\" />\n        </FairysRNValtioForm.FormItem>\n        <FairysRNValtioForm.FormItem label=\"监听数据渲染\">\n          <Cusotm />\n        </FairysRNValtioForm.FormItem>\n        <TouchableOpacity onPress={onSubmit}>\n          <Text>提交</Text>\n        </TouchableOpacity>\n      </FairysRNValtioForm>\n    </View>\n  );\n}\nexport default Basic;\n\n```\n\n## 隐藏表单项\n\n```tsx\n\n\n\ninterface State {\n  username?: string;\n  隐藏表单项?: string;\n}\n\nfunction Basic() {\n  const form = FairysRNValtioForm.useForm<State>();\n\n  const onSubmit = async () => {\n    try {\n      const values = await form.validate();\n      console.log(values);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <View style={{ padding: 20 }}>\n      <FairysRNValtioForm<State>\n        form={form}\n        rules={{\n          username: [{ required: true, message: '请输入用户名' }],\n        }}\n      >\n        <FairysRNValtioForm.FormItem\n          name=\"username\"\n          label=\"输入5隐藏表单项\"\n          onAfterUpdate={(value) => {\n            console.log('value', value);\n            form.updatedHideInfo({ 隐藏表单项: value === '5' });\n          }}\n        >\n          <TextInput placeholder=\"请输入\" />\n        </FairysRNValtioForm.FormItem>\n        <FairysRNValtioForm.FormHideItem\n          rules={[{ required: true, message: '请输入隐藏表单项' }]}\n          name=\"隐藏表单项\"\n          label=\"隐藏表单项\"\n        >\n          <TextInput placeholder=\"请输入隐藏表单项\" />\n        </FairysRNValtioForm.FormHideItem>\n        <TouchableOpacity onPress={onSubmit}>\n          <Text>提交</Text>\n        </TouchableOpacity>\n      </FairysRNValtioForm>\n    </View>\n  );\n}\nexport default Basic;\n\n```\n","routePath":"/rn-form/use","lang":"zh","toc":[{"id":"基础使用","text":"基础使用","depth":2,"charIndex":0},{"id":"监听数据渲染","text":"监听数据渲染","depth":2,"charIndex":1483},{"id":"隐藏表单项","text":"隐藏表单项","depth":2,"charIndex":2670}],"frontmatter":{"title":"案例"},"version":""},{"title":"基础表单组件概览（Taro）","content":"组合基础表单组件，使其直接配置即可使用\n\n## 安装\n\n```bash\nnpm install @fairys/taro-valtio-form-basic # yarn add @fairys/taro-valtio-form-basic # pnpm add @fairys/taro-valtio-form-basic\n```\n","routePath":"/taro-form/","lang":"zh","toc":[{"id":"安装","text":"安装","depth":2,"charIndex":21}],"frontmatter":{"title":"基础表单组件概览（Taro）","overview":true},"version":""},{"title":"表单参数","content":"## 类型\n\n部分参数依赖[基础表单组件概览]()\n\n**布局**\n\n```ts\n\nexport interface FairysTaroValtioFormLayoutProps extends FairysValtioFormLayoutAttrsProps {}\nexport declare function FairysTaroValtioFormLayout(props: FairysTaroValtioFormLayoutProps): import(\"react/jsx-runtime\").JSX.Element;\n\n```\n\n**表单项**\n\n```ts\n/**表单项*/\n\n\nexport interface FairysTaroValtioFormItemProps<T extends MObject<T> = Record<string, any>> extends Omit<ViewProps, 'style'>, FairysValtioFormItemAttrsProps {\n    /**是否使用控制隐藏的表单项*/\n    isHide?: boolean;\n    /**是否使用无样式表单项*/\n    noStyle?: boolean;\n}\n/**普通表单项*/\nexport declare function FairysTaroValtioFormItemBase<T extends MObject<T> = Record<string, any>>(props: Omit<FairysTaroValtioFormItemProps<T>, 'isHide' | 'noStyle'>): import(\"react/jsx-runtime\").JSX.Element;\n/**控制隐藏的表单项*/\nexport declare function FairysTaroValtioFormHideItem<T extends MObject<T> = Record<string, any>>(props: Omit<FairysTaroValtioFormItemProps<T>, 'isHide' | 'noStyle'>): import(\"react/jsx-runtime\").JSX.Element;\n/**无样式表单项*/\nexport declare function FairysTaroValtioFormItemNoStyle<T extends MObject<T> = Record<string, any>>(props: Omit<FairysTaroValtioFormItemProps<T>, 'isHide' | 'noStyle'>): import(\"react/jsx-runtime\").JSX.Element;\n/**表单项基础组件(根据isHide和noStyle判断是否使用控制隐藏的表单项和无样式表单项)*/\nexport declare function FairysTaroValtioFormItem<T extends MObject<T> = Record<string, any>>(props: FairysTaroValtioFormItemProps<T>): import(\"react/jsx-runtime\").JSX.Element;\n\n```\n\n**表单**\n\n```ts\n\n\n\n\n\nexport interface FairysTaroValtioFormProps<T extends MObject<T> = Record<string, any>> extends FairysValtioFormAttrsProps<T> {}\n\ndeclare function FairysTaroValtioFormBase<T extends MObject<T> = Record<string, any>>(props: FairysTaroValtioFormProps<T>, ref: React.Ref<FairysValtioFormInstance<T>>): import(\"react/jsx-runtime\").JSX.Element;\nexport declare const FairysTaroValtioForm: typeof FairysTaroValtioFormBase & {\n    /**初始化实例*/\n    useForm: typeof useFairysValtioFormInstance;\n    /**获取状态*/\n    useFormState: typeof useFairysValtioFormInstanceContextState;\n    /**获取隐藏状态*/\n    useFormHideState: typeof useFairysValtioFormInstanceContextHideState;\n    /**获取上下文实例*/\n    useFormInstance: typeof useFairysValtioFormInstanceContext;\n    /**表单项基础组件*/\n    FormItemBase: typeof FairysTaroValtioFormItemBase;\n    /**表单项组件*/\n    FormItem: typeof FairysTaroValtioFormItem;\n    /**隐藏表单项组件*/\n    FormHideItem: typeof FairysTaroValtioFormHideItem;\n};\n\n```\n","routePath":"/taro-form/interface","lang":"zh","toc":[{"id":"类型","text":"类型","depth":2,"charIndex":0}],"frontmatter":{"title":"表单参数"},"version":""},{"title":"案例","content":"## 引入样式\n\n```ts title='src/app.tsx'\nimport '@fairys/valtio-form-basic/esm/styles/index.css';\n```\n\n## 基础使用\n\n```tsx\n\n\n\ninterface State {\n  username?: string;\n  username2?: string;\n  username3?: string;\n  username4?: string;\n}\n\nfunction Basic() {\n  const form = FairysTaroValtioForm.useForm<State>();\n\n  const onSubmit = async () => {\n    try {\n      const values = await form.validate();\n      console.log(values);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <View style={{ padding: 20 }}>\n      <FairysTaroValtioForm<State>\n        form={form}\n        rules={{\n          username: [{ required: true, message: '请输入用户名' }],\n        }}\n      >\n        <FairysTaroValtioForm.FormItem name=\"username\" label=\"用户名\">\n          <Input placeholder=\"请输入\" />\n        </FairysTaroValtioForm.FormItem>\n        <FairysTaroValtioForm.FormItem rules={[{ required: true, message: '请输入用户名2' }]} name=\"username2\" label=\"用户名2\">\n          <Input placeholder=\"请输入\" />\n        </FairysTaroValtioForm.FormItem>\n        <FairysTaroValtioForm.FormItem rules={[{ required: true, message: '请输入用户名3' }]} name=\"username3\" label=\"用户名3\">\n          <Input placeholder=\"请输入\" />\n        </FairysTaroValtioForm.FormItem>\n        <FairysTaroValtioForm.FormItem rules={[{ required: true, message: '请输入用户名4' }]} name=\"username4\" label=\"用户名4\">\n          <Input placeholder=\"请输入\" />\n        </FairysTaroValtioForm.FormItem>\n        <Button onClick={onSubmit}>提交</Button>\n      </FairysTaroValtioForm>\n    </View>\n  );\n}\nexport default Basic;\n\n```\n\n## 隐藏表单\n\n```tsx\n\n\n\ninterface State {\n  username?: string;\n  隐藏表单项?: string;\n}\n\nfunction Basic() {\n  const form = FairysTaroValtioForm.useForm<State>();\n\n  const onSubmit = async () => {\n    try {\n      const values = await form.validate();\n      console.log(values);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <View style={{ padding: 20 }}>\n      <FairysTaroValtioForm<State>\n        form={form}\n        rules={{\n          username: [{ required: true, message: '请输入用户名' }],\n        }}\n      >\n        <FairysTaroValtioForm.FormItem\n          name=\"username\"\n          label=\"输入5隐藏表单项\"\n          onAfterUpdate={(value) => {\n            console.log('value', value);\n            form.updatedHideInfo({ 隐藏表单项: value === '5' });\n          }}\n        >\n          <Input placeholder=\"请输入\" />\n        </FairysTaroValtioForm.FormItem>\n        <FairysTaroValtioForm.FormHideItem\n          rules={[{ required: true, message: '请输入隐藏表单项' }]}\n          name=\"隐藏表单项\"\n          label=\"隐藏表单项\"\n        >\n          <Input placeholder=\"请输入隐藏表单项\" />\n        </FairysTaroValtioForm.FormHideItem>\n        <Button onClick={onSubmit}>提交</Button>\n      </FairysTaroValtioForm>\n    </View>\n  );\n}\nexport default Basic;\n```\n\n## 监听表单\n\n```tsx\n\n\n\ninterface State {\n  username?: string;\n}\n\nconst Cusotm = () => {\n  const [formState] = FairysTaroValtioForm.useFormState<State>();\n  return <View>{formState.username}</View>;\n};\n\nfunction Basic() {\n  const form = FairysTaroValtioForm.useForm();\n\n  const onSubmit = async () => {\n    try {\n      const values = await form.validate();\n      console.log(values);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const formState = FairysTaroValtioForm.useFormInstanceToState(form);\n\n  return (\n    <View style={{ padding: 20 }}>\n      <View>用户名：{formState.username}</View>\n      <FairysTaroValtioForm\n        form={form}\n        rules={{\n          username: [{ required: true, message: '请输入用户名' }],\n        }}\n      >\n        <FairysTaroValtioForm.FormItem name=\"username\" label=\"用户名\">\n          <Input placeholder=\"请输入\" />\n        </FairysTaroValtioForm.FormItem>\n        <FairysTaroValtioForm.FormItem label=\"监听数据渲染\">\n          <Cusotm />\n        </FairysTaroValtioForm.FormItem>\n\n        <Button onClick={onSubmit}>提交</Button>\n      </FairysTaroValtioForm>\n    </View>\n  );\n}\nexport default Basic;\n\n```\n","routePath":"/taro-form/use","lang":"zh","toc":[{"id":"引入样式","text":"引入样式","depth":2,"charIndex":0},{"id":"基础使用","text":"基础使用","depth":2,"charIndex":97},{"id":"隐藏表单","text":"隐藏表单","depth":2,"charIndex":1535},{"id":"监听表单","text":"监听表单","depth":2,"charIndex":2764}],"frontmatter":{"title":"案例"},"version":""}]